This note is created to work as a notebook but its possible search through it.
due to continuing on keeping notes on digital notepad, the data is written after Day 23 but previous days will be covered.


### Day 23 EtherChannel ###

(ASW) Access Layer Switch: a switch that end hosts connect to 
(DSW) Distribution layer Switch: a Switch that access layer switches connect to. 

Oversubscription: when the bandwidth of the interfaces connected to end hosts is greater that the bandwidth of the connection to the distribution switches (DSW). to much of oversubscription causes congestion.

problem can be fixed by ethernetChannel:
if you connect two switches together with multiple links (say for improving the band width), all except one will be disabled by spanning tree to prevent broadcast storm and layer 2 loops. so other links will be unused unless the active link fails, and then one of the inactive links will start forwarding.
thus, EtherChannel groups multiple interfaces together to act as a single interface.
STP will treat this group as a single interface.

in EtherChannel, Traffic is load balanced among the physical interfaces. an Algorithm is used to determine which traffic should be on which physical interface.

some other names for etherChannel:
Port Channel
LAG (Link Aggregation Group)

EtherChannel load balance is based on 'Flows'.
A flow is a communication between two nodes in the network.
Frames in the same flow will be forwarded using the same physical interface. if frame in the same flow is forwaded using different interface it can cause problem for some applications.
so, etherchannel uses algorithm to channel different flows from different interfaces.

the two inputs for the selection calculation in etherchannel are based on:
Source MAC
Destination MAC
Source IP
Destination IP
and some cases the inputs are on L4 (Transport), the TCP and UDP
note: inputs are based on type and model of switches.

command:
show etherchannel load-balance => to see the switch load balancing inputs
note:
non-IP: some packet may not be encapsulated in Ethernet frame so there is no IP address to be used so the MAC addresses are used.

command:
conf t
port-channel load-balance (method; example:src-dst-mac) => configures method of load-balancing configuration.

three methods for EtherChannel configuration on Cisco Switches:
1.PAgP (Port Aggregation Protocol): Cisco Proprietary. Dynamically negotiates the creation/maintenance of the EtherChannel (like DTP does for trunks)
2.LACP (Link Aggregation Control Protocol): Industry standard protocol (IEEE 802.3ad)
Dynamically negotiates the creation/maintenance.
3.Static EtherChannel: interfaces are statically configured to form an EtherChannel.

note:
up to 8 interaces can be formed into a single EtherChannel. however in LACP, 16 are allowed by 8 of them will be in standby mode.

command:
steps for PAgP configuration
ASW(config)# interface range g0/0 - 3 => for instance selecting range of interfaces.
(config-if-range)# channel-group (num to indentify the virtual interface ex:1) mode ( desirable or auto) => to establish PAgP on the selected range of interfaces. 

steps for LACP configuration
similar to PAgP but,
(config-if-range)# channel-group (num to indentify the virtual interface ex:1) mode ( active, passive) => active (for LACP unconditionally) and passive (for only if a LACP device is detected) 

steps for Static configuration
similar to previous ones but,
(config-if-range)# channel-group (num to indentify the virtual interface ex:1) mode on => on mode only works with on mode on the other side to form static etherChannel.

Manually configure the negotiation protocol by channel-protocol
command:
channel-protocol (lacp, pagp) => this command will manually configure interface to prepare for lacp or pagp configuration

show ip interface brief => shows table 

EtherChannel Configuration notes:
• Members interfaces must have matching configurations:
	same duplex (half/full)
	same switch port mode (trunk/access)
	same speed
	same allowed VLANs/native VLAN (for trunk interfaces)
• if an interface's configurations do not match the others, it will be excluded from the EtherChannel

command:
show etherchannel summary => it will show status of etherchannel of switch

show etherchannel port-channel => shows number of ports and protocol and also channel group mode.

show spanning-tree => by using this command after configuration you can confirm that STP is treating all as a single interface or not.

layer 3 switches (multilayer switches)
if you take out a multilayer switch from layer 2 switchports there is no need to run spanning-tree at all because routed ports don't forward layer 2 broadcasts, so no layer 2 loops can be formed.
for such functionality, ' no switchport ' command is used 
however for layer 3 we need ip address for interfaces and that ip address is set on port-channel interface



### Day 24 Dynamic Routing ###

in routing table
Network route: A route to a network/subnet (mask length < /32) actually shown by C

host routes: host route is a route to a specific host (/32 mask), a single address. it is shown by L

routes can be adveritsed by the router that has that subnet. however if the router that is advertising the route is out of reach the table will be updated and the route will be removed to prevent sending data to dead-end

routers can used dynamic routing protocols to advertise information about the routes they know.
they form adjacencies/ neighbor relationships/ neighborships with adjacent routers to exchange this information.

if mutliple routes to a destination are learned, the router determines which router is superior and adds it to the routing table.
it uses 'metrics' of the route to decide which is superior (lower metric = superior)

dynamic routing protocls can be devided into two main categories:
IGP (Interior Gateway Protocol) = used to share routes within a single autonomous system (AS), which is a single organization ( for example routers inside a compnay A)
EGP (Exterior Gateway Protocol) = used to share routes between different Autonomous systems ( example connection of a router inside company A to router inside ISP A )

Algorithm types in Dynamic routing Protocols (processes each protocol uses to share route information and choose te best route)

IGP:
1. Distance Vector. example:
	Routing Information Protocol (RIP) ,
	Enhanced Interior Gateway Routing Protocol (EIGRP)
2.Links State. example:
	Open shortest Path First (OSPF)
	Intermediate System to Intermediate System (IS-IS)
EGP:
Path Vector. example: 
	Border Gateway Protocol (BGP)

DIstance Vector Routing Protocols:
this protocol were invented before links state. Distance vector operates by sending the following information to their directly connected neighbors
	their known destination networks
	their metric to reach their known destination network
this method of sharing route information is often called 'routing by rumor'
this is because the router doesn't know about the network beyond its neighbors. it only knows the information that its neighbors tell it.

Link State Routing Protocols:
in Link State protocols, every router creates a 'connectivity map' of the network
to allow this each router advertises information about its interfaces (connected to network) to its neighbors. these advertisment is passed along until all routers in the newtork develop the same map of the network.
each router independenly uses this map to calculate the best route to each destination
Link State protocol uses more resource (CPU) on the router because more information is shared.
however, link state tend to be faster in reacting to changes in the network than distance vector.

Metrics in Dynamic Routing
metric values are used for the routes to be determined which is the best. A low metric is better.
each routing protocl uses a diffrerent metric to determine which route is the best.

if a router learns two (or more) routes via the same protocol and same destination ans same metric, all will be added to the routing table and the traffic will be load-balanced over both routes.
this is called ECMP (Equal Cost Multi-cast)

note:
Static routes don't use metrics and in routing table the metric is 0 and administrative distance is also 1.

Protocl metrics:
Protocol			Metric
RIP 				Hop Count
EIGRP			Metric based on Bandwith & delay (by default)
OSPF			Cost
IS-IS			Cost


RIP:Hop count = each router in the path counts as 1 hop. the links of all  speeds are equal.

EIGRP: bandwith & delay = the bandwidth of the slowest link in the route and the total delay of all links in the route are used.

OSPF:Cost = the cost of each link is calculated based on bandwidth the total metric is the total cost of each link in the route.

IS-IS:Cost = the total is the total cost of each link in the route. the cost of each link is not automatically calculated by default and all links have a cost of 10 by default.

Administrative Distance:
different routing protocol use different metrics, so they cannot be compared. so the administrative distance (AD) is used to determine which routing protocol is preferred.
a lower AD is preferred and indicates that the routing protocl is considered more trustworthy.

Route protocol/type			AD
Directly connected				0
Static						1
External BGP(eBGP)			20
EIGRP						90
IGRP						100
OSPF						110
IS-IS						115
RIP							120
EIGRP(external)				170
Internal BGP (iBGP)			200
Unusable route				255
 
note:
AD can be changed for static router or other protocols



### Day 25 RIP & EIGRP ###
RIP: Routing information Protocol (industry standard)
RIP is a distance vector routing ( uses routing-by-rumor to learn/share routes)
it uses hop count as its metric. one router = one hop (bandwidth is irrelevant)
the maximum hop count is 15 and more that that is considered unreachable so the RIP is not used in large network and also it is not used in nowadays network alot.
has three version: RIPv1 RIPv2 for IPv4 and RIPng(next generation) for IPv6
it uses two massage types:
Request: to ask RIP-enabled neighbor routers to send their routing table
Response: to send the local router's routing table to neighboring routers
by default information is shared every 30 seconds

RIPv2 (improved version of v1) for instance:
it supports VLSM, CIDR and not just classful addresses (class A,B,C)
it includes subnet mask information in advertisements
messages are multicast to 224.0.0.9 and not broadcast in 255.255.255.255

multicast: messages are delivered only to devices that have joined that specific multicast group.

RIP configuration
(config) # router rip => to enable the rip routing protocl
(config-router) #version 2 => it enables the RIP version 2
(config-router) # no auto-summary => auto-summary converts the networks to classful network, so needs to be shutdown.
(config-router) # network 10.0.0.0 => this command is classful, it will automatically conver to calssful network.
the network command tells:
look for interfaces with an IP address that is in the specified range.
active RIP on the interfaces that fall in the range
form adjacencies with connected RIP neighbors
advertise the network prefix of the interface (not the prefix in the network command)
note: the OSPF and EIGRP network commands operate in the same way
also note that the network commadn doesn't tell the router which networks to advertise. it tells the router which interfaces to activate RIP on, and then the router will advertise the nwtwork prefix of those interfaces.

(config-router) # passive-interface g2/0 => if there are no RIP neighbors to the interface (G2/0), the router will send RIP advertisment out of that interface so it cause unnecessary traffic, so passive interface tells to stop advertising on that interface.

advertise a default route into RIP:
(config) # ip route 0.0.0.0 0.0.0.0 (next hop interface IP) 
(config-router) # default-information originate => it will advertise the default route to the internet.

note:
RIP also do load-balancing, if the hops are equal.

show ip protocols:
R1#show ip protocls => it will give information about protocl being used in that router.


Enhanced Interior Gateway Routing Protocol (EIGRP)
it was Cisco proprietary, but Cisco has now published it.
EIGRP is considered an 'advanced/hybrid distance vector routing protocol
much faster than RIP in reacting to changes over network
does not have the 15 hop-count limits so it can be used in larger networks.
send messages using multicast address 224.0.0.10
it is the only IGP that can perfom unequal-cost load-balancing (by default it performs ECMP load-balancing over 4 paths like RIP)

EIGRP configuration:
(config) #router eigrp 1
(config-router) # no auto-summary
(config-router) #passive-interface g2/0
(config-router) # network 10.0.0.0
(config-router) # network 172.16.1.0. 0.0.0.15

EIGRP uses a wildcard msak instread of a regular subnet mask
a wildcard mask is basically an 'inverted' subnet mask.
all 1s in the subnet mask are 0 in the equivalent wildcard mask. all 0s in the subnet mask are 1 in the equivalent wildcard mask.

11111111.11111111.11111111.00000000
255.255.255.0
it will become:
00000000.00000000.00000000.11111111
0.0.0.255
/24
shortcut is to subtract each octet of the subnet mask from 255

'0' in the wildcard mask = must match
'1" in the wildcard mask = don't have to match
if it matches the EIGRP will be activated on the interface

10101100.00010000.00000001.00001110 => 172.16.1.14
EIGRP network command:
10101100.00010000.00000001.00000000 => 172.16.1.0
00000000.00000000.00000000.00001111 => 0.0.0.15

router ID order priority in EIGRP
1.manual configuration
2.Highest IP address on a loopback interface
3.Highest IP address on a physical interface

in show ip route the EIGRP is shown by 'D'

Lab Notes:

EIGRP metric is actually a formula that include the bandwidth and delay, in simple word:
it is actually bandwidth of the slowest link + the delay of all links

EIGRP terminology:
Feasible Distance (FD) = this router's metrics value to the route's destination.
Reported Distance (aka Advertised Distance) = the neighbor's metric value to the route's destination
Successor = the route with the lowest metric to the destination ( the best route)
Feasible Successor = an alternate route to the destination ( not the best route)
a route is considered feasible successor if it's reported distance is lower than the successor route's feasible distance.

EIGRP unequal-cost load-balancing

example
EIGRP maximum metric variance 1
Variance 1 = only ECMP load-balancing will be performed.
Variance 2 = feasible successor routes with an FD up to 2x the successor route's FD can be used to load-balance

note:
EIGRP will only perform unequal-cost load-balancing over feasible successor routes, regardless of the variance.
