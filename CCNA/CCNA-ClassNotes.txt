This note is created to work as a notebook but its possible search through it.
due to continuing on keeping notes on digital notepad, the data is written after Day 23 but previous days will be covered.


### Day 23 EtherChannel ###

(ASW) Access Layer Switch: a switch that end hosts connect to 
(DSW) Distribution layer Switch: a Switch that access layer switches connect to. 

Oversubscription: when the bandwidth of the interfaces connected to end hosts is greater that the bandwidth of the connection to the distribution switches (DSW). to much of oversubscription causes congestion.

problem can be fixed by ethernetChannel:
if you connect two switches together with multiple links (say for improving the band width), all except one will be disabled by spanning tree to prevent broadcast storm and layer 2 loops. so other links will be unused unless the active link fails, and then one of the inactive links will start forwarding.
thus, EtherChannel groups multiple interfaces together to act as a single interface.
STP will treat this group as a single interface.

in EtherChannel, Traffic is load balanced among the physical interfaces. an Algorithm is used to determine which traffic should be on which physical interface.

some other names for etherChannel:
Port Channel
LAG (Link Aggregation Group)

EtherChannel load balance is based on 'Flows'.
A flow is a communication between two nodes in the network.
Frames in the same flow will be forwarded using the same physical interface. if frame in the same flow is forwaded using different interface it can cause problem for some applications.
so, etherchannel uses algorithm to channel different flows from different interfaces.

the two inputs for the selection calculation in etherchannel are based on:
Source MAC
Destination MAC
Source IP
Destination IP
and some cases the inputs are on L4 (Transport), the TCP and UDP
note: inputs are based on type and model of switches.

command:
show etherchannel load-balance => to see the switch load balancing inputs
note:
non-IP: some packet may not be encapsulated in Ethernet frame so there is no IP address to be used so the MAC addresses are used.

command:
conf t
port-channel load-balance (method; example:src-dst-mac) => configures method of load-balancing configuration.

three methods for EtherChannel configuration on Cisco Switches:
1.PAgP (Port Aggregation Protocol): Cisco Proprietary. Dynamically negotiates the creation/maintenance of the EtherChannel (like DTP does for trunks)
2.LACP (Link Aggregation Control Protocol): Industry standard protocol (IEEE 802.3ad)
Dynamically negotiates the creation/maintenance.
3.Static EtherChannel: interfaces are statically configured to form an EtherChannel.

note:
up to 8 interaces can be formed into a single EtherChannel. however in LACP, 16 are allowed by 8 of them will be in standby mode.

command:
steps for PAgP configuration
ASW(config)# interface range g0/0 - 3 => for instance selecting range of interfaces.
(config-if-range)# channel-group (num to indentify the virtual interface ex:1) mode ( desirable or auto) => to establish PAgP on the selected range of interfaces. 

steps for LACP configuration
similar to PAgP but,
(config-if-range)# channel-group (num to indentify the virtual interface ex:1) mode ( active, passive) => active (for LACP unconditionally) and passive (for only if a LACP device is detected) 

steps for Static configuration
similar to previous ones but,
(config-if-range)# channel-group (num to indentify the virtual interface ex:1) mode on => on mode only works with on mode on the other side to form static etherChannel.

Manually configure the negotiation protocol by channel-protocol
command:
channel-protocol (lacp, pagp) => this command will manually configure interface to prepare for lacp or pagp configuration

show ip interface brief => shows table 

EtherChannel Configuration notes:
• Members interfaces must have matching configurations:
	same duplex (half/full)
	same switch port mode (trunk/access)
	same speed
	same allowed VLANs/native VLAN (for trunk interfaces)
• if an interface's configurations do not match the others, it will be excluded from the EtherChannel

command:
show etherchannel summary => it will show status of etherchannel of switch

show etherchannel port-channel => shows number of ports and protocol and also channel group mode.

show spanning-tree => by using this command after configuration you can confirm that STP is treating all as a single interface or not.

layer 3 switches (multilayer switches)
if you take out a multilayer switch from layer 2 switchports there is no need to run spanning-tree at all because routed ports don't forward layer 2 broadcasts, so no layer 2 loops can be formed.
for such functionality, ' no switchport ' command is used 
however for layer 3 we need ip address for interfaces and that ip address is set on port-channel interface



### Day 24 Dynamic Routing ###

in routing table
Network route: A route to a network/subnet (mask length < /32) actually shown by C

host routes: host route is a route to a specific host (/32 mask), a single address. it is shown by L

routes can be adveritsed by the router that has that subnet. however if the router that is advertising the route is out of reach the table will be updated and the route will be removed to prevent sending data to dead-end

routers can used dynamic routing protocols to advertise information about the routes they know.
they form adjacencies/ neighbor relationships/ neighborships with adjacent routers to exchange this information.

if mutliple routes to a destination are learned, the router determines which router is superior and adds it to the routing table.
it uses 'metrics' of the route to decide which is superior (lower metric = superior)

dynamic routing protocls can be devided into two main categories:
IGP (Interior Gateway Protocol) = used to share routes within a single autonomous system (AS), which is a single organization ( for example routers inside a compnay A)
EGP (Exterior Gateway Protocol) = used to share routes between different Autonomous systems ( example connection of a router inside company A to router inside ISP A )

Algorithm types in Dynamic routing Protocols (processes each protocol uses to share route information and choose te best route)

IGP:
1. Distance Vector. example:
	Routing Information Protocol (RIP) ,
	Enhanced Interior Gateway Routing Protocol (EIGRP)
2.Links State. example:
	Open shortest Path First (OSPF)
	Intermediate System to Intermediate System (IS-IS)
EGP:
Path Vector. example: 
	Border Gateway Protocol (BGP)

DIstance Vector Routing Protocols:
this protocol were invented before links state. Distance vector operates by sending the following information to their directly connected neighbors
	their known destination networks
	their metric to reach their known destination network
this method of sharing route information is often called 'routing by rumor'
this is because the router doesn't know about the network beyond its neighbors. it only knows the information that its neighbors tell it.

Link State Routing Protocols:
in Link State protocols, every router creates a 'connectivity map' of the network
to allow this each router advertises information about its interfaces (connected to network) to its neighbors. these advertisment is passed along until all routers in the newtork develop the same map of the network.
each router independenly uses this map to calculate the best route to each destination
Link State protocol uses more resource (CPU) on the router because more information is shared.
however, link state tend to be faster in reacting to changes in the network than distance vector.

Metrics in Dynamic Routing
metric values are used for the routes to be determined which is the best. A low metric is better.
each routing protocl uses a diffrerent metric to determine which route is the best.

if a router learns two (or more) routes via the same protocol and same destination ans same metric, all will be added to the routing table and the traffic will be load-balanced over both routes.
this is called ECMP (Equal Cost Multi-cast)

note:
Static routes don't use metrics and in routing table the metric is 0 and administrative distance is also 1.

Protocl metrics:
Protocol			Metric
RIP 				Hop Count
EIGRP			Metric based on Bandwith & delay (by default)
OSPF			Cost
IS-IS			Cost


RIP:Hop count = each router in the path counts as 1 hop. the links of all  speeds are equal.

EIGRP: bandwith & delay = the bandwidth of the slowest link in the route and the total delay of all links in the route are used.

OSPF:Cost = the cost of each link is calculated based on bandwidth the total metric is the total cost of each link in the route.

IS-IS:Cost = the total is the total cost of each link in the route. the cost of each link is not automatically calculated by default and all links have a cost of 10 by default.

Administrative Distance:
different routing protocol use different metrics, so they cannot be compared. so the administrative distance (AD) is used to determine which routing protocol is preferred.
a lower AD is preferred and indicates that the routing protocl is considered more trustworthy.

Route protocol/type			AD
Directly connected				0
Static						1
External BGP(eBGP)			20
EIGRP						90
IGRP						100
OSPF						110
IS-IS						115
RIP							120
EIGRP(external)				170
Internal BGP (iBGP)			200
Unusable route				255
 
note:
AD can be changed for static router or other protocols



### Day 25 RIP & EIGRP ###
RIP: Routing information Protocol (industry standard)
RIP is a distance vector routing ( uses routing-by-rumor to learn/share routes)
it uses hop count as its metric. one router = one hop (bandwidth is irrelevant)
the maximum hop count is 15 and more that that is considered unreachable so the RIP is not used in large network and also it is not used in nowadays network alot.
has three version: RIPv1 RIPv2 for IPv4 and RIPng(next generation) for IPv6
it uses two massage types:
Request: to ask RIP-enabled neighbor routers to send their routing table
Response: to send the local router's routing table to neighboring routers
by default information is shared every 30 seconds

RIPv2 (improved version of v1) for instance:
it supports VLSM, CIDR and not just classful addresses (class A,B,C)
it includes subnet mask information in advertisements
messages are multicast to 224.0.0.9 and not broadcast in 255.255.255.255

multicast: messages are delivered only to devices that have joined that specific multicast group.

RIP configuration
(config) # router rip => to enable the rip routing protocl
(config-router) #version 2 => it enables the RIP version 2
(config-router) # no auto-summary => auto-summary converts the networks to classful network, so needs to be shutdown.
(config-router) # network 10.0.0.0 => this command is classful, it will automatically conver to calssful network.
the network command tells:
look for interfaces with an IP address that is in the specified range.
active RIP on the interfaces that fall in the range
form adjacencies with connected RIP neighbors
advertise the network prefix of the interface (not the prefix in the network command)
note: the OSPF and EIGRP network commands operate in the same way
also note that the network commadn doesn't tell the router which networks to advertise. it tells the router which interfaces to activate RIP on, and then the router will advertise the nwtwork prefix of those interfaces.

(config-router) # passive-interface g2/0 => if there are no RIP neighbors to the interface (G2/0), the router will send RIP advertisment out of that interface so it cause unnecessary traffic, so passive interface tells to stop advertising on that interface.

advertise a default route into RIP:
(config) # ip route 0.0.0.0 0.0.0.0 (next hop interface IP) 
(config-router) # default-information originate => it will advertise the default route to the internet.

note:
RIP also do load-balancing, if the hops are equal.

show ip protocols:
R1#show ip protocls => it will give information about protocl being used in that router.


Enhanced Interior Gateway Routing Protocol (EIGRP)
it was Cisco proprietary, but Cisco has now published it.
EIGRP is considered an 'advanced/hybrid distance vector routing protocol
much faster than RIP in reacting to changes over network
does not have the 15 hop-count limits so it can be used in larger networks.
send messages using multicast address 224.0.0.10
it is the only IGP that can perfom unequal-cost load-balancing (by default it performs ECMP load-balancing over 4 paths like RIP)

EIGRP configuration:
(config) #router eigrp 1
(config-router) # no auto-summary
(config-router) #passive-interface g2/0
(config-router) # network 10.0.0.0
(config-router) # network 172.16.1.0. 0.0.0.15

EIGRP uses a wildcard msak instread of a regular subnet mask
a wildcard mask is basically an 'inverted' subnet mask.
all 1s in the subnet mask are 0 in the equivalent wildcard mask. all 0s in the subnet mask are 1 in the equivalent wildcard mask.

11111111.11111111.11111111.00000000
255.255.255.0
it will become:
00000000.00000000.00000000.11111111
0.0.0.255
/24
shortcut is to subtract each octet of the subnet mask from 255

'0' in the wildcard mask = must match
'1" in the wildcard mask = don't have to match
if it matches the EIGRP will be activated on the interface

10101100.00010000.00000001.00001110 => 172.16.1.14
EIGRP network command:
10101100.00010000.00000001.00000000 => 172.16.1.0
00000000.00000000.00000000.00001111 => 0.0.0.15

router ID order priority in EIGRP
1.manual configuration
2.Highest IP address on a loopback interface
3.Highest IP address on a physical interface

in show ip route the EIGRP is shown by 'D'

Lab Notes:

EIGRP metric is actually a formula that include the bandwidth and delay, in simple word:
it is actually bandwidth of the slowest link + the delay of all links

EIGRP terminology:
Feasible Distance (FD) = this router's metrics value to the route's destination.
Reported Distance (aka Advertised Distance) = the neighbor's metric value to the route's destination
Successor = the route with the lowest metric to the destination ( the best route)
Feasible Successor = an alternate route to the destination ( not the best route)
a route is considered feasible successor if it's reported distance is lower than the successor route's feasible distance.

EIGRP unequal-cost load-balancing

example
EIGRP maximum metric variance 1
Variance 1 = only ECMP load-balancing will be performed.
Variance 2 = feasible successor routes with an FD up to 2x the successor route's FD can be used to load-balance

note:
EIGRP will only perform unequal-cost load-balancing over feasible successor routes, regardless of the variance.



### Day 26 OSPF Part 1 ###

OSPF (Open Shortest Path First) is a Link state routing protocol which it means that it creates a map of network connectivity.

OSPF uses the shortest path first algorithm which is known as Dijkstra's algorithm

Version of OSPF:
OSPFv1: not in use any more
OSPFv2 used for ipv4
OSPFv3 (2008): used for IPv6

Routers store information about the network in LSAs (Link State Advertisements), which are organized in a structure called the LSDB (Link State DataBase)

Routers will flood LSAs untill all the routers in the OSPF area develope the same map of the network (LSDB)

Basic information in LSA:
RID (Router ID): 4.4.4.4 (it can be a loopback or manually configured and became RID)
IP: 192.168.4.0/24 (ip of the route)
Cost: 1

procedure of LSA and LSDB in OSPF:
1.OSPF is enable on Router interface
2.Router creates an LSA to tell its neighbors about the network of that interface
3.LSA is flooded throughout the network until all routers have received it
4. this results in all routers sharing the same LSDB
5.each router then uses the SPF algorithm (dijkstra) to calculate its best route to that route.
note:
LSA has 30min by default the LSA will be flooded  again after the timer expires.


OSPF Area:
OSPF uses areas to divide up the network
small networks can be single-area without any negative effects on perfomance.

In larger networks, a single-area design can have negative effects:
-the SPF algorithm takes more time to calculate routes
- the the SPF algorithm requires exponentially more processing powerr on the routes
- the larger LSDB takes up more memory
- any small change in the network causes every router to flood LSAs and run the SPF algorithms again.

by dividing a large OSPF network into several smaller areas, you can avoid the above negative effects

OSPF Areas:
• Area 0 (Backbone) 
• an Area is a set of router and lins that share the same LSDB.
• the backbone area (area 0)  is an area that all the other areas must connect to.
• Routers with all interfaces in the same area are called internal routers.
• Routers with interfaces in multiple areas are called Area Router Borders (ARBs)
note: ABRs maintain separate lSDB for each areas connected to. it is recommended to connected ABRs to maximum of 2 areas, cause more that that can cause overburden the router.
• Routers connected to the backbone area (area 0) are called backbone routers.
• An intra-area route is a route to destination inside the same OSPF area.
• an interarea route is a route to a destination in a different OSPF area.

OSPF important rules:
• OSPF areas should be contiguous. it means that areas should not be divided or splitted up into different parts.
• All OSPF ares must have at least one ABR connected to the backbone area.
• OSPF interfaces in the ame subnet must be in the same area.


Basic OSPF Configuration
1. R(config) # router ospf (process id) => a router can run multiple process at once and this OSPF is one of them. and this command will enable OSPF process on the router
note: the OSPF process ID is locally significant nad routers with different process IDs can become ISPF neighbors. (unlike EIGRP which uses AS (autonomous system id) to work)

2. R(config-router) #network 10.0.12.0 0.0.0.3 area 0 => OSPF uses wildcard mask just like EIGRP and also the area should be defined.

• R(config-router) #passive-interface g2/0 => the passive-interface command tells the router to stop sending OSPF 'hellow' messages out of the interface.
however the router will continue to send LSAs informing it's neighbors about the subnet configured on the interface.
use this command on interfaces which don'y have any OSPF to stop wasting resources.

advertise a default route into OSPF
• R(config) #ip route 0.0.0.0 0.0.0.0 (ip interface of the next hop to default route example: 203.0.113.2) 

• R(config-router) #default-information originate => the command to advertise the default route into OSPF. it causes the router to create a new LSA to flood it.
by show ip route it can be checked.

• show ip protocol => to check out the protocol information.

Router ID order of Priority:
1. Manual configuration
2. Highest IP address in a loopback interface
3. Highest IP address on a physical interface

to change router id:
• R(config-router) #router-id (the ip)
and then use Reload or `clear ip ospf process` (not recommended in real network) to clear the previous id and set the new id.

in show ip protocol:
the field "autonomous system boundary router (ASBR) is an OSPF router that connects the OSPF network to an external network. for instance the Router that is connected to the internet and has `default-information originate` is a ASBR.

note:
OSP doesn't support unequal-cost load-balancing but it does support ECMP (equal cost multiple path) load-balancing.
in show ip protocols for OPSF, "maximum path: 4" it means the ECMP load balancing
• R(config-router) #maximum-paths (number of paths) => it will change the maximum paths for OSPF router.



### Day 27 OSPF part 2 ###

OSPF's metric is called cost. it is based on the bandwidth (speed) of the interface and calculated by dividing a refrence bandwidth value by the interfcae's bandwidth.

the default reference bandwidth is 100 mbps:
	Reference 100 mbps/Interface 10mbps = 10 cost
	Reference of 100 mbps/ Interface 100 mbps = 1 cost
	Reference of 1000 mbps/Interface 1000 mbps = 1 cost
All values less than 1 will be converted to 1. therefore FastEthernet, Gigabit Ethernet, 10Gig Ethernet. are equal and all ave a cost of 1 by default.

command to check for cost of an interface on the router:
• R#show ip ospf interface (interface)

due to this calculation over interfaces on OSPF protocol the cost of each interface should be change.
to change the reference bandwidth:
• R1(config-router)# auto-cost reference-bandwidth (megabits-per-second)
note: the command is entered megabits per second (default is 100) thus for better calculate that number should be increase to more in order to make distinction between interfaces cost.
for example:
	100000 / 100 mbps interface = 1000
	100000 / 1000 mbps (1Gbps) interface = 100
you should configure a reference bandwidth greater than the fastest links in your network (for future upgrades in bandwidth)
note that same reference should be configured on all OSPF networks.

loopback interfaces have cost of 1. for example:
if a router with 1Gbps and reference of 10000 is connected to loopback 4.4.4.4 of another router interface the cost will be:
1Gps interface (100) + loopback interface (1) = 101


cost can also be manually changed by:
• R(config) #interface g0/0
• R(config-if) #ip ospf cost (cost 1-65535)

then the cost can be checked by:
• show ip ospf interface (interface)

one more option to change the OSPF cost of an interface is to change bandwidth of that interface. by command `bandwidth`.
bandwidth is used because the calculation is reference bandwidth / interface bandwidth = cost
keep in mind that changing the bandwidth does not affect over speed of that interfaces.
the bandwidth is just a value that is used to calculate OSPF cost and etc.
• R1(config-if)# bandwidth (<1-100000000> kilobits) => kilobits is used for changing the bandwidth

to change the speed at which the interface operates, use `speed` command.

it is not recommended to change the bandwidth value to alter the interface's OSPF cost. because the bandwidth value is used in other calculations.

however it is recommended that you change the reference bandwidth, and then use the `ip ospf cost` command to change individual interfaces.

thus there are three ways to modify interface cost:
1. by changing the reference bandwidth # R(config-if) # auto-cost reference-bandwidth (mbps)
2. by manual configuration: R(config-if) #ip ospf cost (cost 1-65535)
3. by changing the interface bandwidth: R(config-if) #bandwidth (kbps)

for checking the cost of interfaces
• R #show ip ospf interface brief => shows the cost of each interface on the router


OSPF neighbors procedure:
when OSPF is activated on an interface, the router starts sending OSPF hello messages out of the interface at regular intervals (determined by the hello timer). these are used to introduce the router  to potential OSPF neighbors. the default hello timer is 10 seconds o an Ethernet connection.

Hello messages are multicast to 224.0.0.5 (multicat adress for all OSPF routrs). and OSPF messages are encapsulaed in an IP header, with a value of 89 (0x59 in hexadecimal) in the Protocol field.


Process of OSPF neighboring

'Down state'
1.1 OSPF is activated on the router interface
1.2 R1 sends an OSPF hello message to 224.0.0.5 
1.3 it doesn't know about any OSPF neighbors yet, so the neighbor state is "Down" and in hello message the neighbor RID is 0.0.0.0

'Init state'
2.1 when R2 receives the hello packet, it will add an entry for R1 to its OSPF neighbor table.
2.2 the R2's neighbor table, the relationship with R1 is now in the "Init" state.
Init state = Hello packet is received, but destination router ID is not in the hello packet.

'2-way state'
3.3 R2 will send a hello paket containing the RID of both router. then R1 will insert R2 into its OSPF neighbor table in the 2-way state (after the R2 hello message with RID of R2 is received).
3.4 R1 will send another Hello message but this time with both RIDs of both Routers. now both routers are in the 2-way state.
2-way state = it means the router has received a hello packet with its own RID in it.
3.5 if both routers are in 2-way state it means the condition is met to share LSAs.

'Exstart state'
the two routers are now prepare to exchange information about their LSDB.
4.1 before that they have to choose which on will start the exchange. they do this in Exstart state.
4.2 The router with the higher RID will become the "Master" and initiate the exchange. the router with the lower RID will become the Slave.
4.3 to decide the Master and Slave, the y exhcnage DBD (Database Description) packets.

'Exchange State'
5.1in the exchange State the router exchange DBDs which contain a list of the LSAs in their LSDB. the DBDs do not include or load information on each other LSDB, just basic information and exchange of the overall data.
5.2 the routers compare the information in the DBD they received to the information in their own LSDB to determine which LSAs they must receive form their neighbors.

'Loading State'
6.1 in the loading state, the routers will send Link State Request (LSR) messages to request that their neighbor send them any LSAs thy don't have. its become possible due to DBDs that are exchanged in exchange state.
6.2 LSAs are sent Link State Update (LSU) messages.
6.3 the router then will send LSAck message sto acknowledge that they received the LSAs.

'Full State'
in the full state, the routers have a full OSPF adjacency and identical LSDBs.
they continue to send and listen for hello packets (every 10 seconds by default) to maintain the neighbor adjacency. evry time a hello packet is received the 'Dead' Timer (40 second by default) is reset.
if the dead timer counts down to 0 and no hello message is received the neighbor will be removed.
then router will continue to share LSAs as the network changes to make sure each router has a complete and accurate map of the network.


commands:
R#show ip ospf neighbor => shows information about OSPF neighbors to the router.


OSPF configuration:
R(config-if) #ip ospf (proces-id) area (area) => it will activate OSPF directly on the interface 

R(config-if) #router ospf 1
R(config-router) #passive-interface default => this command configure all interfaces as OSPF passive interface.

R(config-router) #no passive-interface (interface-id) => it disables the passive configuration.



### Day 28 OSPF part 3 ###

Loop back interfaces description:
A loopback interface is a virtual interface in the router. it is always up/up unless it is manually shut down.
it is not dependent on physical interface and it provides a consistent IP address that ccan be used to reach/identify the router


OSPF network types:
Thee are three main OSPF network types (type of connection)
1.Broadcast: enaled by default on ethernet and FDDI (Fiber Distributed Data Interfaces) interfaces.
2.Point-to-Point: enable by default on PPP (point-to-point protocol) and HDLC (High-Level Data Link Control) interfaces.
3.Non-broadcast: enbaled by efault on Frame Relay and X.25 interfaces

Broadcast Network Type:
Enabled on Ethernet and FDDI interfaces by default.
Routers dynamically discover neighbors by sending/listening for OSPF hello messages using multicast address 224.0.0.5
A DR (designated router) and BDR (backup designated router) must be elected on each subnet (only DR if there are no OSPF neighbors)
Routers which aren't the DR or BDR become a DROther.

the DR/BDR election order priority:
1.Highest OSPF interface priority
2.Highest OSPF Router ID
First place becomes the DR for the subnet 'second place' becomes the BDR

the default OSPF interface proirity is 1

• R(config-if) #ip ospf priority <0-255> => this command is used to change the interface priority.

note: if you set the OSPF interface priority to 0, the router cannot be the DR/BDR for the subnet.

important:
the DR/BDR election is 'non-preemptive'. once the DR/BDR are selected they willl keep their role until OSPF is reset. that is why interface with priority of 255 becomes DROther

in the broadcast network type,router still only form a full OSPF adjacency with the DR or BDR of the segment.
therefore, routers only exchange LSAs with the DR and BDR. DROthers will not exchange LSAs with each other.
all routers will still have the same LSDB, but this reduces the amount of LSAs flooding the network.

note:
Messages to the DR/BDR are multicast using address 224.0.0.6

DR and BDR state is between 2-way state - (DR/BDR election) - Exstart State

the DR & BDR will form a full adjacency with ALL routers in the subnet but the DROthers will only form a full adjacency with DR/BDR ((backup) Designated Route)

command: to check out the full adjacency and neighbor count.
• R#show ip ospf interface brief => it has the Nbrs F/C column which indicate the full adjacency and neighbor count of the routers in OSPF network.

• R# show ip ospf interface g0/0 => with show ip ospf interface the neighbor count and adjecancies can be shown.


Point-to-Point Network Type
- Enabled on serial interfaces using PPP or HDLC encapsulation by default.
- Routers dynamically discover neighbors by sending/listening OSPF Hello messages on multicast address 224.0.0.5
- A DR and BDR are not elected. no point to elected cuase its point to point connection.

Serial Interfaces (obsolete)
one side of a serial connection functions as DCE (Data Communiction Equipment). and the other as  DTE (Data Terminal Equipment)
the DCE side needs to spcify the "clock rate (speed)" of the connection.
the serial interfaces use clock rate command instead of speed in ethernet interfaces.

encapsulation method can change by:
• R(config-if) #encapsulation (type)
note: the default encapsulation is HDLC and you can configure it to PPP

configuration can be checked out by:
• R1 #show running-config interface s2/0

• R# show controllers (interface-id) => identify which side is DCE/DTE

•R(config-if)# clock rate (bits-per-second) => clock rate must be set for serial interface

note:
in point-to-point connection, the ip ospf neighbor shows "-" in state of interface. because it is not categorized.

you can configure the OSPF network type on an interface with:
R(config-if) # ip ospf network type

if two router are directly connected to each other there is no need for DR/BDR. the point-to-point connection can be established.

note: not all network types work on all link types (for example, a serial link cannot use the broadcast network type)


OSPF Neighbor Requirements
1. Area number must match. for instance all Neighbors should be in area 0

2.Interfaces must be in the same subnet. for instance, interface should be in 192.0.1.0 0.0.0.3 area 0 

3. OSPF process must not be shutdown

4. OSPF Router IDs must be unique
for example, R1 has 192.1.1.2 as it RID and R2 should have 192.1.1.2 as RID

5. Hello and Dead timers must match. it means that hello timer should be in smaller interval that Dead timer.

6. Authentication setting must match. in OSPF it is possible to set authentication key for OPSF connection and OSPF is only connected to the same authenticated OSPF interface.
command:
• R1(config-if) #ip ospf authentication-key (password) => it will set a password-key for that OSPF interface.
• R1(config-if) #ip ospf authentication => it will enable the authentication for that interface.

7. IP MTU (Maximum Transission Unit) settings must match.
note: can become OSPF neighbors, but OSPF doesn't operate properly. it will throw too many retransmissions error.
command:
• R(config-if) #ip mtu <68-1500 bytes>  => to set MTU of that interface
 
8. OSPF network type must match.


OSPF LSA types:
there are 11 types of LSA, but there are only 3 that are required the most in CCNA.
1. Type 1 (Router LSA)
	-every OSPF router generates this type of LSA
	-it identifies the router using router ID
	-it also lists networks attacked to the router's OSPF-activated interfaces.
2. type 2 (Network LSA)
	-Generated by the DR of each 'multi-access' network (the broadcast network type)
	- list the routers which are attached to the multi-access network
3. type 5 (AS External LSA)
	-Generated by ASBRs to describe routes to destinations outside of the AS (OSPF domain)

the LSAs can be checked by `show ip ospf database`



### Day 29 First Hop Redundancy Protocol FHRP###

FHRP (First Hop redundancy protocol ) is a cumputer networking protocol which is designed to protect the default gateway used on a subnetwork by allowing two or more routers to provide backup for that address; in the event of failure of an active router, the backup router will take over the address.
that is why first hop is used due to the gateway.

in FHRPs
- A virtual IP is configured on the two routers, and a virtual MAC is generated for the virtual IP (each FHRP uses a different format for the virtual MAC)

- An active router and a standby router are elected (different FHRPs uses different terms)

- end hosts in the network are configured to use the virtual IP as their default gateway.

- the active router replies to ARP request using the virtual MAC address, so traffic destined for other newtorks will be sent to it.

- if the active router fails, the standby becomes the next active router.
the new actvie router will send gratuitous ARP messages so that switches will update their MAC address tables. It now functions as the default gateway.
note:
Gratuitous ARP: ARP reply sent without being requested.
the frame is broadcast FFFF.FFFF.FFFF (normal ARP replies are unicast)

-if the old active router comes back online, by default it won't take back its role as the active router. it will become standby router
note:
FHRPs are not-preemtive. the current active router will not automatically give up its role, even if the former active router returns. unless it is manually changed.

- you can configure 'preemption', so tha the old active router does take back its old role.


HSRP (Host Standby Router Protocol)
- Cisco proprietary

- an active and standby router are elected

- there are two versions: version 1 and version 2
version 2 adds IPv6 support and increases the number of groups that can be configured

- multicast IPv4 address: v1 = 224.0.0.2
					    v2 = 224.0.0.102

- virtual MAC address: v1 = 0000.0c07.acXX (XX = HSRP group number)
				       v2 = 0000.0c9fXXX (XXX = HSRP group number)

- in a situation with multiple subnets/VLANs, you can configure a different active router in each subnet/VLAN to load balance.
for example R1 can be active and R2 can be standby in VLAN1 and R1 be standby and R2 be active in VLAN2


VRRP (Virtual Router Redundancy Protocol)
- Open standard

- A master and Backup router are elected

- Multicast IPv4 address: 224.0.0.18

-Virtual MAC address: 0000.5e00.01XX (XX = VRRP group number) ex: (0xc8 = 200) so .01c8 will be equal to group number 200

- In a situation with multiple subnets/VLANs, you can configure a different master router in each subnet/VLAN to load balance.


GLBP (Gateway Load Balancing Protocol)
- Cisco Proprietary

- Load balances among multiple routers within a single subnet

- An AVG (Active Virtual Gateway) is elected.

- Up to four AVFs (Active Virtual Forwarders) are assigned by the AVG (the AVG itself can be an AVF too)

- Multicast IPv4 address: 224.0.0.102

- Virtual MAC address: 0007.b400.XXYY (XX= GLBP group number, YY = AVF number)
 

Configuration commands fro HSRP over two routers

on R1 the interface is selected. note that the interface connected to the internet should be selected which is acting as the default gateway.

• R1(config) #interface g0/0

• R1(config-if) #standby <0-255 group number> => in version 1 the group number is vary from 0 to 255 but in version 2 it is 0 to 4095.

• R1(config-if) #standby version 2 => it will change the version to v2 so the group range will increase.
note: v1 and v2 are not compatible so versions should match.

• R1(config-if) #standby 1 ip 172.17.0.254 => to set IP address you want to use as the default gateway (the Virtual IP)

• R1(config-if) #standby 1 priority <0-255> => determine which router to be the active router
note:
the active router determined in this order:
	1. highest priority (default 100)
	2.highest IP address

• R1(config-if) # standby 1 preempt => preempt causes the router to take the role of active router even if another router already has the role.
note: its only neccessary on the router you want to become active preempt

• R1 #show standby => gives information about the HSRP configuration on Router



### Day 30 TCP & UDP ###

Functions of Layer 4 (Transport Layer)
-Provides transparent transfer of data between end-hosts

-Provides (or doesn't provide (base on tcp or udp)) various services to applications:
	-reliable data transer
	-error recovery
	-data sequencing
	-flow control

-provides layer 4 addresing (port numbers: not the phyiscal interfaces):
	-Identify the application layer protocol for example port 80 which indicate HTTP. (TCP): Src:50000 Dst: 80. Src is randomly selected by a PC. and 80 identifies the application layer protocol 
	-Provides session multiplexing


Session:
a session is an exchange of data between two or more communicating devices.


port ranges are designated by IANA (Internet Assigned Number Authority):
Well-known port numbers: 0 - 1023 example. HTTP , FTP,SSH ... selection is restricted
Registered port numbers: 1024 - 49151.
Ephemeral/private/dynamic port numbers: 49152 - 655535. host uses this range when selecting a random source port.


TCP (Transmission Control Protocol)
-TCP is connection-oriented.
	- Before actually sending data to the destination host the two communicate to establish a connection. once the connection is stablished, the data exchange begins.

-TCP provides reliable communication.
	-The destination host must acknowledge that it received each TCP segment.
	-If a segment isn't achnowledged, it is sent again.

-TCP provides sequencing.
	-Sequence numbers in the TCP header allow destintion hosts to put segments in the correct order even if the y arrive out of order.

-TCP provides flow control.
	-The destination host can tell the source host to increase/decrease the rate that data is sent.


Establishing Connections: Three-Way handshake:
1.SYN flag in segment is sent -->
2.SYN flag, ACK flag is received <--
3.ACK flag  is sent -->
then the conncetion will be stablished

Terminating Connections: Four-Way handshake:
1. FIN flag is segment is sent -->
2. ACK flag is recieved <--
2. FIN flag is received <--
4. ACK flag is sent -->
the connection will be terminated

TCP sequencing /Acknowledgment
1. Seq: 10 is sent -->
2. Seq:50 & Ack:11 is received <-- the ack is 1 more number more thatn the seq to be consequented.
3. Seq:11 & Ack:51 is sent -->
4. Seq:52 & Ack: 12 is received <--
...
...
host set a random initial sequence number.
Forward acknowledgement is used to indicate the sequence number of the next segment the host expeects to receive.

TCP Retransmission : for a segment not being acknowledged.
for example:
1.Seq 20 is sent -->
2.ACK 21 is received <--
3.Seq 21 is sent -->
but this time no Ack is received. so the host 1 will wait for certain amount of time and sent the Seq 21 again until Ack 22 is received.


TCP Flow Control: Window Size
-Acknowledging every single segment, no matter what size, is inefficient.

-The TCP header's "Window Size" field allows more data to be sent before an acknowledgment is required.

-A "sliding window" can be used to dynamically adjust how large the window size is.

note that in real situation the sequence numbers get much larger and do not increase by 1 with each message.


UDP (User Datagram Protocol)
-UDP is not connection-oriented
	-the sending host does not establish a connection with the destination host before sending data. the data is simply sent.

-UDP does not provide reliable communication
	-when UDP is used, acknowledgments are not sent for received segments. If a segment is lost, UDP hsa no mechanism to re-transmit it. Segments are sent 'best-effort', it means that there is no guarantee

-UDP does not provide sequencing
	-There is no sequence number filed in the UDP header. If segments arrive out of order, UDP has no mechanism to put them back in order.

-UDP does not provide flow control
	UDP has no mechanism like TCP's window size to control the flow of data.

UDP datagram header only have: Source port, Destination port, Length, Checksum


note:
-TCP provides more feature than UDP, but at the cost of additional overhead.
-There are some applications that use UDP, but provide reliability etc within the application itself. for instance TFTP (Trivial File Transfer Protocol)
- some applications use both TCP & UDP, depending on the situation. for example DNS

retrieving email

Important Port Numbers:
TCP
FTP data (20)
FTP control (21)
SSH (22)
Telnet (23)
SMTP (25) sending email
HTTP (80)
POP3 (110) retrieving email
HTTPS (443)

UDP
DHCP server (67)
DHCP client (68)
TFTP (69)
SNMP agent (161)
SNMP manager (162)
Syslog (514)

TCP & UDP
DNS (53)



### Day 31 IPv6 Part 1 ###
The main reason is that there simply aren't enough IPv4 address available.
however, VLSM, Private IPv4 addresses, and NAT have been used to conserve the use of IPv4 address space but there were short-term solutions.

IANA which controls Ipv5 address assignments, distributes IPv5 address space to various RIRs( Regional Internet Registries) which then assign them to companies that need them:
AFRINIC: for africa continent
APNIC: for east asia and australi
ARIN: north America
LACNIC: south America
RIPE NNC: Europe, middle east , russia

on 25 september of 2015 ARIN declared exhaustion of the ARI IPv4 address pool.

IPv6 descriptions
-Internet Stream Protocl was developed in the later 1970s but never actually introduced for public use.
-It was never called IPv5, but it used a value of 5 in the version field of the IP header.
-So when the succesor to IPv4 was being developed, it was named IPv6


Hexadecimal:

- binary/ base 2 / 0b 
it is binary because it only has 2 digits. 0 & 1
use case:
for instance it is not possible to find out if '10' is binary or not so it is shown as 0b10 which it means binary 10

- Decimal / Base 10 / 0d
0, 1, 2, 3, 4, 5, 6, 7, 8, 9,

- Hexadecimal / Base 16 / 0x
0,1,2,3,4,5,6,7,8,9,A,B,C,D,E,F


Binary to Hexadecimal 

0b11011011:     first it should be splited in two decimanl number

0d1101	0d1011: now that is in decimal and it will be equal to 0d13 0d11
0d13	0d11:   convert each 4-bit group to decimal

0xD	0xB:	convert each decimal number to hexadecimal.

0b110111011 => 0xDB that's the answer


IPv6:
an IPv6 address is 128 bits.
2001:0DB8:5917:20َ1:0020:0080:34DB


Shortening (abbreviating) IPv6 addresses

- Leading 0s can be removed
2001:0DB8:000A:001B:20A1:0020:0080:34BD
will be:
2001:DB8:A:1B:20A1:20:80:34BD


- Consecutive quartets of all 0s can be replaced with a double colon (::)
2001:0DB8:0000:0000:0000:0080:34BD
will be:
2001:0DB8::80:34BD
note:
we can commit this because IPv6 address are known for their 8 quartets in length so missing quartets will be replaced by 0.

important:
consecutive quartets of 0s can only bea vvriated once in an IPv6 address
for instance:
2001:0000:0000:0000:20A1:0000:0000:34BD
will become:
2001::20A1:0:0:34BD.
because if we use abbreviation for both sides its difficult to know which side has amount of quertets to be 8 quartets. instead we remove leading 0.


Finding the IPv6 prefix (global unicast addresses)
-Typically, an enterpise requesting IPv6 addresses from their ISP will receive a /48 block.

-Typically IPv6 subnets use a /64 prefix length
that means an entrprise has 16 bits to use to make subnets cause it has received /48 block

- The remaining 64 bits can be used for hosts.


2001:0DB8:8B00:0001:0000:0000:0000:0001/64

2001:0DB8:8B00 => 48-bit 'global routing prefix' assined by the ISP

:0001: (after global routing prefix) => 16-bit 'subnet identifier' used by the enterprise to make various subnets.

0000:0000:0000:0001 => 64-bit 'interface identifier' the host portion of the address


Finding the IPv6 prefix
300D:00F2:0B34:2100:0000:0000:1200:0001/56
number of bits:
(16):(32):(48):2(52)1(56)00(64):(80):(102):(116):(128)

example:
2001:0DB8:0BAD:CAFE:1300:0689:9000:0CDF/71 => 2001:DB8:BAD:CAFE:1200::/71
2001:0DB8:0000:FEED:0DAD:018FL6001:0DA3/62 => 2001:DB8:0:FEEC::/62

note:
2001:db8:0:0::/64 => this subnet is used for documentation and example not in real network

configuring IPv6 address command:
1. • R(config) #ipv6 unicast-routing => to enable ipv6 routing on the router.

configure the interface
2. • R(config) #interface g0/1 => selecting the desired interface
   • R(config-if) #ipv6 address 2001:db8:0:0::1/64 => giving an IP version v6 address to 2001:db8:0:0::/64
   • R(config-if) #no shutdown

• R# show ipv6 interface brief => to show interfaces with IPv6 IP addresses

in 'show ipv6 interface brief' there is actually 2 IPs for each interface.
GigabitEthernet0/1 [up/up]
	1.* FE80:EF8:22FF:FE36:8501 
	2001:DB8:0:1::1

* this Ip is called Link-Local Addresses. they are automatically assigned to interface when they are enabled.
Ipv4 also has link-local but its not automatically assigned.




### Day 32 IPv6 Part 2 ###

Configuring IPv6 addresses (EUI-64)

-EUI stands for extended Unique Identifier or Modified EUI-64

-(Modified) EUI-64 is a method of converting a MAC adress (48-bits) into a 64-bit interface identifier.

-This interface identifier can then become the 'host portition' of a /64 IPv6 address.

-How to convert the MAC address:
1. Divide the MAC address in half
123456789AB => 123456 | 789AB
2. Insert FFFE in the middle
123456FFFE789AB
3.invert the 7th bit:
123456789AB => 2 is 0010 so the 1 will be 0.
103456789AB


Configuring IPv6 addresses (EUI-64)
1. • R(config)# interface g0/0 => selecting the desired interface
2. • R(config)# ipv6 address 2001:db8::/64 => tells the outer to use this prefix plus te EUI-64 interface identifier to generate an IPv6 address.

• R1# show interface g0/0 => to check interface MAC address.

• R1(config-if)#do show ipv6 interface brief => it demonstrate all interface. also the 7th of the binary will be converted.

why inver the 7th bit?
-MAC addres an nbe divided into two types:
1.UAA (University Administered address)
	-Uniquely assigned to the dvice by the manufacturer
2.LAA (Locally Administered Address)
	-Manually assigned by an admin (with the mac-address command on the interface) or protocol. doesn't have to be globally unique.

- you can identify a UAA or LAA by the 7th bit of the MAC address, called the U/L bit (Universal/Local bit):
	-U/L bit set to 0 = UAA
	-U/L bit set to 1 = LAA

in the context of IPv6 addresses/EUI-64, the meaning of the U/L bit is reversed:
	-U/L bit set to - = the MAC address the EUI-64 interface ID was made from was an LAA
	-U/L bit set to  = the MAC address the EUI-64 interface ID was made from was a UAA


Global unicast addresses
-Global unicast IPv6 addresses are public addresses which can be used over the Internet.

- must register to use them. Because they are public addresses, it is expected that they are globally unique.

- Originally define as the 2000::/3 block (2000:: to 3FFF:FFFF:FFFF:FFFF:FFFF:FFFF:FFFF:FFFF).
now defined as all addresses which aren't reserved for other purposes.


Unique local addresses
- Unique local IPv6 addresses are private addreses which caanot be used over the internet.

- You do not need to register use them. they can be used freely within internal networks and don't need to e globally unique (*). can't be routed over the internet. the ISP will drop it

- Uses the address block FC00::/7 (FC00:: to FDFF:FFFF:FFFF:FFFF:FFFF:FFFF:FFFF:FFFF)
however, a later update requires the 8th bit to be set to 1, so the first two digits must be FD.

- *the global ID should be unique so that addresses don't overlap when companies merge


Link Local Addresses

-Link-local IPv6 addresses are automatically generated on IPv6-enabled interfaces.
use command R1(config-if) # ipv6 enable on an interface to enable IPv6 on that interface.

-Link-local means that these addreses are used for communication within a single link (subnet)
Router will not route packets with a link-local destination IPv6 address.

-Common uses of link-local addresses: routing protocl peerings (OSFPv3 uses link-local addreses for neighbor adjacencies)

-the interface ID is generated using EUI-64 rules.

day 32 IPv6 continues:

Multicast
multicast addresses are one-to-many
	one source to multiple destination (that have joined the sepcific multicast group)

IPv6 uses range FF00::/8 for multicast (FF00:: to FFFF:FFFF:FFFF:FFFF:FFFF:FFFF:FFFF:FFFF)

IPv6 doesn't use broadcast (there is no 'broadcast address')

multicast range for different usecases:

Purpose									IPv6			IPv4
All nodes/hosts (functions like broadcast)	FF02::1		224.0.0.1
All routers								FF02::2		224.0.0.1
All OSPF routers							FF02::5		224.0.0.5
All OSPF DRs/BDRs						FF02::6		224.0.0.6
All RIP routers							FF02::9		224.0.0.9
all EIGRP routers							FF02::A		224.0.0.10


Multicast address scopes:
IPv6 defines multiple multicast 'scopes' which indicate how far the packet should be forwarded. the addresses in the table above use the 'link-local' scope (FF02) which stays in the local subnet.

IPv6 multicast scopes:
- Interface-local (FF01): The packet doesn't leave the local device. Can be used to send traffic to a service within the local device. also known as local node

- Link-local (FF02): The packet remains in the local subnet. Routers will not route the packet between subnets.

- Site-local (FF05): The packet can be forwarded by routers. Should be limited to a single physical location (not forwarded over a WAN)

- Organization-local (FF08): wider in scope that site-local (an entire company/organization)

- Global(FF0E): No boundaries. Possible to be routed over the internet.


Anycast addresses
anycast is a new feature of IPv6
- anycast is 'one-to-one-of-many' it means there are multiple possilbe destination but it is only send to one of them. mixture of multicast and unicast.

- Multiple router are configured with the same IPv6 address.
	they use a routing protocl to advertise the address.
	when hosts send packets to that destination address, routers will forward it to the nearest (referred to smallest routing metric cost) router configured with that IP address (based on routing metric)

- There is no specific address range for anycast addresses. use a regular unicast address (global unicast, unique local) and specify it as an anycast address:
• R(config-if)# ipv6 address 2001:db8:1:1::99/128 anycast

anycast address configuration:
1.R1(config)# interface g0/0 => selecting the interface that is wanted to be configured.
2. R1(cofig-if)# ipv6 address 2001:db8:1:1::99/128 anycast => with anycast in the end we configure this IP to be anycast
3. R1(config) #do show ipv6 interface g0/0 => check the information about anycast of the interface. [ANY] is an indication


Other IPv6 addresses
• :: = the unspecified IPv6 address
	Can be used when a device doesn't yet know its IPv6 address.
	IPv6 default routes are configured ::/0
	IPv4 equivalent: 0.0.0.0

• ::1 = the loopback address
	used to test the protocol stack on the local device
	processed within the local device, but not sent to other devices.
	IPv4 equivalent: 127.0.0.1/8 address range.




### Day 33 IPv6 Part 3 ###

IPv6 Address Representation:
RFC 5952 is a Recommendation for IPv6 address Text representation
RFC (Request for Comments) is a publication from the ISOC (internet Society) and asociated organizations like the IETF (Internet Engineering Task Force), and are the official documents of internet specifications, protocols, procedures, etc.


RFC 5952 suggests standardizing IPv6 address Representation:
- Leading 0s must be removed:
2001:0db8:0000:0001:0f2a:4fff:fea3:00b1
will be:
2001:db8:0:1:fa:4fff:fea3:b1

- :: MUST be used to shroten the longest string of all-0 quartets:
(if there is only one all-0 quartet, don't use '::')
2001:0000:0000:0000:0f2a:0000:0000:00b1
will be:
2001::f2a:0:0:b1

- If there are two equal-length choices for the ::, use :: to shorten the one on the left.
2001:0db8:0000:0000:0f2a:0000:0000:00b1
will be:
2001:db8::f2a:0:0:b1

- Hexadecimal characters (a,b,c,d,e,f) must be written using lower-case, not upper-case (but its not that big deal but it is recommended due to Cisco devices)


IPv6 Headers:
IPv6 is a Fixed Header Format and due to this attiribute it is much more shorter that IPv4 header.

- IPv6 Header - Version: 
Length 4 bits
indicates the version of IP that is used
Fixed value of 6 (0b0110) to indicate IPv6

- IPv6 Header - Traffic Class
Length: 8 bits
Used for QoS (Quality of Service), to indicate high-priority traffic.
For example IP phone traffic, live video calls, etc, will have a traffic class value which gives them priority over other traffic.

- IPv6 Header - Flow Label
Length: 20 bits
Used to identify specfici traffic 'flows' (communications between a specific source and destination)

- IPv6 Header - Payload Length
Length: 16 bits
Indicate the length of the payload (the encapsulated layer 4 segment) in bytes.
The length of IPv6 header itself isn't include, because it's always 40 bytes.

- IPv6 Header - Next Header
Length: 8 bits
Indicate the type of the 'next header' (header of the necapsulated segment) for example TCP or UDP
Same function as the IPv4 header's 'Protocol' field.

- IPv6 header - Hop limit
Length: 8 bits
The value in this field is decremented by 1 by each router that forwawrds it, if it reaches 0, the packet is discarded.
Same function as  the IPv4 header's 'TTL' field.

- IPv6 header - Source / Destination
Length 127 bits each
The se filed contain the IPv6 addresses of the packet's source and detination 


Solicited-Node Multicast address
An IPv6 solicited-node multicast address is calculated from a unicast address.
[ff02:0000:0000:0000:0000:0001:ff] + Last 6 hex digist of unicast address

for example:
2001:0db8:0000:0001:0f2a:4fff:fea3:00b1
will be:
ff02::1:ff:a3:b1

Neighbor Discovery Protocol
- Neighbor Discovery Protocol (NDP) is a protocl used with IPv6
- It has various functions, and one of those functions is to replace ARP (Address Resolution Protocol), which is no longer used in Pv6.
- The ARP-like function uses ICMPv6 and solicited-node multicast addresses to learn the MAC address of other hosts. (ARP is IPv4 uses broadcast)
- Two message types are used:
	1.Neighbor Solicitation (NS) = ICMPv6 Type 135
	2. Neighbor Advertisement (NA) = ICMPv6 Type 136


Neighbor Solicitation Packet fields
for instance R1 is pinging the R2:
1. Source IP: R1 G0/0 IP
2. Destination IP: R2 solicited-node multicast address
3. Source MAC: R1 G0/0 MAC
4. destination MAC: multicast MAC based on R2's solicited-node address.

Neighbor Advertisement (NA) packet fields:
1. Source IP: R2 G0/0 IP
2. Destination IP: R1 G0/0 IP
3. R2 G0/0 MAC
4. Destination MAC: R1 G0/0 MAC

IPv6 Neighbor Table
• R1# show ipv6 neighbor => the IPv6 neighbor table on routers can be shown by this command and to check MAC address, age and state of each addresses.


NDP allows hosts to atumatically discover routers on the local network.
Two messages are used for this process:
1. Router Solicitation (RS) = ICMPv6 Type 133
	Sent to multicast address FF02::2 (all routers)
	Asks all routers on the local link to identify themselves.
	Sent when an interface is enabled/host is connected to the network
2. Router Advertisement (RA) = ICMPv6 Type 134
	Sent to multicast address FF02::1 (all nodes)
	The router announces its presence, as well as other information about the link.
	These messages are sent in response to RS messages.
	They are also sent periodically, even if the router hasn't received an RS.


SLAAC (Stateless Address Auto-configuration)
Host s uses the RS/RA messages to learn the IPv6 Prefix of the local link (ie. 2001:db7::/64), and then automatically generate an IPv6 address.

Using the `ipv6 address prefix/prefix-length eui-64` command, you need to manually enter the prefix.

using the `ipv6 address autoconfig` command, you don't need to enter the pefix. the device uses NDP to learn the pefix used on the local link.

he device wil use EUI-65 togenerate the interface ID , or it will be randomly generated (depending on the device/maker)


Duplicate Address Detection (DAD)
DAD allows host to check if other devices on the local link are using the same IPv6 address.
any time an IPv6-enabled interface initializes it perfomrs DAD.
DAD uses NS and NA. if host doesn't get a reply it knows the address is unique.
if it gets a reply it means another host on the network is already using the address.


IPv6 Static Routing
IPv6 and IPv4 routing works the same, the two processes are separate on the router, and the two routing tables are separated as well.
IPv5 routing is enbaled by default but IP routing is disabled by default, and must be enaled with ipv6 unicast-routing.
If IPv6 routing is disabled, the router will be able to send and receive IPv6 traffic, but will not route IPv6. (will not forward it).


note that:
Routes for link-local addresses are not added to the routing table.
A local host route is automatiically added for each address configured on the router.

command for IPv6 Static Routing
• R(config-if) # ipv6 route destination/prefix-length {next-hop | exit-interface [next-hop]} [ad]
{} => cuerly brackets mean a required choice.
| => pipe stands for 'OR' so either next-hop or exit-interface
[] => square brackets mean an optional choice.

Names for different IP static configuration base on options that are being set.
- Directly attached static route: only the exit interface is specified.
	`ipv6 route destination/prefix-length exit-interface`
example:R1(config)# ipv6 route 2001:db8:0:3::/64 s0/0/0
note:
in IPv6 you can't use directly attached static routes if the interface is an Ethernet interface.

- Recursive static route: only the next hop is specified.
	`ip route destination/prefix-length next-hop`
	R1(config)# ipv6 route 2001:d88:0:3::/64 2001:db8:0:12::2
	
- Fully specified static route: Both the exit interface and next hop are specified.
	`ipv6 route destination/prefix-length exit-interface next-hop`
	R1(config)# ipv6 route 2001:db8:0:3::/64 g0/0 2001:db8:0:12::2

examples:
Network route:
R1(config)# ipv6 route 2001:db8:0:3::/64 2001:db8:0:12::2

Host route:
R2(config)# ipv6 route 2001:db8:0:3::100/128 2001:db8:0:12::1
we use /128 to route for host route.

Default route:
R3(config)# ipv6 route ::/0 2001:db8:23::1


Link-Local Next-Hops
when next-hop and the exit-interface is specificed on the router, the static route is called: "fully specificed static route".
reason you need to specify the exit interface is because, with a link-local next-hop address, the router isn't able to figure out, on its own, which interface that next-hop address is connected to.




### Day 34 ACL ###

Access Control List (ACL)
-ACLs (Access Control Lists) have multiple uses and can be used for security perspective

-ACLs function as a pcaket filter, instructing the router to permit or discard specific traffic.

-ACLs can filter traffic based on source/destination IP addresses, source/destination Layer 4 ports, etc.


How ACLs work
- ACLs are configured globbaly on the router (global config mode)

- They are an ordered sequence of ACEs (Access Control Entries)

for example:
ACL 1:
1. if source IP = 192.168.1.0/24, then permit
2. if source IP = 192.168.2.0/24, then deny
3. if source IP = any, then permit
(the sequence of this configuration is important)

- Configuring an ACL in global config mode will not make the ACL take effect.

- The ACL must be applied to an interface eventhough it is applied on global configuration.

- ACLs are applied either inbound or outbound

- When the router checks a packet against the ACL, it processes the ACEs in order, from top to bottom.

A maximum of one ACL can be applied to a single interface per direction.
Inbound: Maximum of one ACL
Outbound: Maximum of one ACL


Implicit Deny
the Implicit deny tells router to deny all traffic that doesn't match any of the configured entries in the ACL.
there is an 'implicit deny' at the end of all ACLs.


ACL Types

- Standard ACLs: Match based on source IP address only
	Standard Numbered ACLs
	Standard Named ACLs

- Extended ACLs: Match based on Source/Destination IP, Source/Destination Port, etc
	Extended Numbered ACLs
	Extended Named ACLs


Standard Numbered ACLs
- Standard ACLs match traffic based only on the source IP address of the packet.

- Numbered ACLs are identified with a number (ie. ACL 1, ACL 2, etc)

- Different types of ACLs have a different range of numbers that can be used.
	Standard ACLs can be 1-99 and 1300-1999

The basic command to configure a standard numbered ACL is:
• R1(config) # access-list (number) {deny | permit } (ip) (wildcard-mask)

examples:
• R1(config)# access-list 1 deny 1.1.1.1 0.0.0.0 => deny the ip with the specificied wildcard-mask
• R1(config)# access-list 1 deny 1.1.1.1 => deny the ip without specifying the mask
• R1(config)# access-list 1 deny host 1.1.1.1 => blocks only a single host

• R1(config)# access-list 1 permit {any | 0.0.0.0 255.255.255.255} => to permit all IPs

• R1(config)# access-list 1 remakr ## Block foreigner From accounting ## => to add remark or comment to the ACL with number 1.


commands:
• R1(config)# do show access-lists => description about access-list of the network
• R1(config)# do show ip access-lists => shows information about the IP ACLs
• R1(config)# do show running-config | include access-list => shows configuration related to access-lists
• R1(config-if)# ip access-group (number) {in | out } => apply ACL configuration over an interface for outbound or inbound

note:
Standard ACLs should be applied as close to the destination as  possible.


Standard Name ACLs
- Standard Name ACLs match traffic based only on the source IP address of the packet.
- Named ACL are identified with a name (ie. "block_departments")
- Standard named ACLs are configured by entering 'standard named ACL config mode' and then configuring each entry within that config mode.

commands for standard ACLs configuration:
• R(config) # ip access-list standard (acl-name) => to enable standard named ACL
• R(config-std-nacl) # [entry-number] { deny | permit } ip wildcard-mask

commands example:
1. • R(config)# ip access-list standard BLOCK_DEPARTMENT => to create a named access-list
2. • R(config-std-nacl)# 5 deny 1.1.1.1 => denying 1.1.1.1 by entry number of 5 
3. • R(config-std-nacl)# 10 permit any => permit rest of IPs by entry number of 10
4. • R(config-std-nacl)# remkar ## configured NOV 1 2024 ## => adding a remark for better understanding
5. • R(config-std-nacl)# interface g0/0 => selecting an interface to set access-group
6. • R(config-std-nacl)# ip access-group BLOCK_DEPARMENT => adding that interface to specific access-group.

• R# show access-lists => to check the access lists
• R# show running-config | section access-list => to demonstrate running configs that are related to access-list

note:
in `show ip access-lists`
the router may re-order the /32 entries, this improves the efficiency of processing the ACL. it doesn't change the efect of the ACL.
this applies to both standard named and standard numbered ACLs. 
however, packet Tracer does not do this.



### Day 35 Extended Access Control Lists ###

the named ACLs are configured with subcommmands in a separate config mode:
	• R1(config)# ip access-list standard BLOCK_PC1
	• R1(config-std-nacl)# deny 192.168.1.1
	• R1(config-std-nacl)# permit any

however, in modern IOS you can also configure numbered ACLs in the exact same way as named ACLs
	• R1(config)# ip access-list standard 1
	• R1(config-std-nacl)# deny 192.168.1.1
	• R1(config-std-nacl)# permit any


Configuring numbered ACLs with subcommands
• R1(config)# ip access-list standard <1-99> (Standrad IP access-list number) <1300-1999> (standrard IP access-list number (expanded range)) 
• R1(config)# ip access-list standard 1
• R1(config-std-nacl)# deny 192.168.1.1
• R1(config-std-nacl)# permit any
• R1(config-std-nacl)# do show running-config | section access-list => to check out configuration


Advantages of named ACL config:
1. you can easily delete individual entries in the ACL with no (entry-number or sequence-number)
• R1(config-std-nacl)# no (entry-number)
• R1(config)# do show running-config | section access-list => it will delete the whoe ACL from router

when configurinbg/editing numbered ACLs from global config mode, you CAN'T delte individual entries, you can ony delete the entire ACL.

2. you can insert new entries in between other entries by specifying the sequence number 


Resequencing ACLs

• R(config)# ip access-list resequence (acl-id) (starting-seq-num) (increment) => to resequencing function.
example:
R1(config)# ip access-list resequence 1 10 10 => the first '10' change the sequence number of the first entry to 10. the second '10' means add 10 for every entry after that.


Extended ACLs
- Extended ACLs function mostly same as standard ACLs. they can be numbered or named, just like standard ACLs.
	- numbered ACLs use the following ranges: 100-199, 2000-2699

- They are processed from top to bottom, just like standard ACLs. they can match traffic based on more parameters, so they are more precise (and more complex) than standard ACLs.

configuring numbered ACL
• R1(config)# access-list extended {permit | deny} protocol (src-ip dest-ip)

configuring named ACL
• R1(config)# ip access-list extnded {name | number}
• R1(config-ext-nacl)# [seq-num] [permit | deny ] protocol (src-ip dest-ip)

recommendation: use ? to check out more options and command for extended ACL configuration.


Matching Protocol
in extended ACL, Internet Protocols can be denied or permitted via the IP protocol number or with the name list is available and can be seen via '?'.
for example
• R1(config-ext-nacl)# deny (tcp | 6)
• R1(config-ext-nacl)# permit ip => ip stands for any Internet Protocol


Matching the source/destination IP address
in exnteded ACLs to specify a /32 source or destination you have to use the host option or specify the wildcard mask.
example:
• R1(config-ext-nacl)# deny tcp host 192.164.22.1

• R1(config-ext-nacl)# deny tcp any (ip address | host | any, etc) => the values in () are the destination address.

• R1(config-ext-nacl)# deny tcp any 10.0.0.0 0.0.0.255 => deny all traffic on TCP protocol to destination 10.0.0.0/24

• R1(config-ext-nacl)# permit ip any any => allow all traffic

• R1(config-ext-nacl)#deny udp 10.0.0.0 0.0.255.255 host 192.168.1.1 => prevent 10.0.0.0/16 from sending UDP traffic to 192.168.1.1/32

• R1(config-ext-nacl)# deny icmp host 172.16.1.1 192.168.0.0 0.0.0.255 => prevent 172.16.1.1/32 from pinging hosts in 192.168.0.0/24


Matching the TCP/UDP prot numbers
- When matching TCP/UDP you can optionally  specify the source and/or destination port numbers to match.
template:
• R1(config-ext-nacl)# deny tcp (src-ip) {eq} (src-port-num) (dest-ip) eq (dst-port-num)

eq 80 = equal to port 80
gt 80 = greater than 80 (81 and greater)
lt 80 = less than 80 (79 and lesser)
neq 80 = not equal to 80
range 80 100 = from port 80 to 100

example:
• R1(config-std-nacl)# deny tcp any host 1.1.1.1 eq 80 => deny all packets destined for ip address 1.1.1.1/32 TCP port 80

after the destination IP and/or destination port there are other options such as:
ack: match the TCP ACK flag
fin: match the TCP FIN flag
syn: match the TCP SYN flag
ttl: match packet with a specific TTL value
dscp: match packets with a specific DSCP (Differentiated Service Code Point) value.

remember that All of the values must match otherwise, the packet won't match that entry of the ACL. more options more restriction.

permit http 10.0.0.0 0.0.255.255 eq 80 host 2.2.2.2 eq 80


Extended ACLs should e applied as close to the source as possible to limit how far the packets travel in the network before being denied.
(standard ACLs are less specific so if they are applied close to the source there is a risk of blocking more traffic than intended)


command:
R# show ip intrface g0/0 => show applied ACL to defined interface



### Day 36 CDP & LLDP ###

Layer 2 discovery protocols such as CDP (Cisco Discovery Protocol) and LLDP (Link Layer Discovery Protocol) share information with and discover information about neighboring (connected) devices.

- the shared information includes host name, ip address, device type, etc.
- CDP is a cisco proprietary protocol and LLDP is an industry standard protocol (IEEE 802.1AB)

- Because they share information about the devices in the network, they can be considered a security risk and are often not used.


CDP ( Cisco Discovery Protocol)
- CDP is a cisco proprietary protocol and its enabled on Cisco Devices by default.

- CDP messages are periodically sent to multicast MAC address 0100.0CCC.CCCC

- When a device receives a CDP message, it processes and discards the message. not forwarding.

- by default CDP messages are sent once every 60 seconds. and by default the CDP holdtime is 180 seconds. if a message isn't received from a neighbor for 180 seconds, the neighbor is removed from the CDP neighbor table.
CDPv2 messags are sent by default.

command:
• R1# show cdp => shows information about CDP timer 
• R1# show cdp traffic => tells traffic created by CDP that is sent and received
• R1# show cdp interface => shows interfaces with CDP enabled
• R1# show cdp neighbors => a nother way to check the neighbor interfaces if CDP is enbaled on them.
• R1# show cdp neighbor detail => gives more detailed information about CDP neighbors.
• R1# show cdp entry (name) => displays the same info as detail but for the specified neighbor only

• R1(config)# [no] cdp run => to enable or disable CDP globally
• R1(config-if )# [no] cdp enable => to disable CDP on an interface
• R1(config)# cdp timer (second) => configure the CDP timer
• R1(config)# cdp holdtime (seconds) => configure the CDP holdtime


LLDP (Link Layer DIscovery Protocol)
- LLDP is an industry standard protocol. it is disabled on cisco devices by default.
a device can run CDP and LLDP at the same time.

- LLDP mesasges are periodically sent to multicast address 0180.C200.000E
when a device receives an LLDP message, it processes and discard the message. no forwarding.
by default LLDP messages are sent once every 30 seconds. and LLDP holdtime is 120 seconds.

LLDP has an additional timer called the reinitialization delay and it is set to2 second. it is used for preventing flapping

commands:
• R1(config)# lldp run => enables LLDP globally
• R1(config-if)# lldp transmit => enables LLDP on specific interface (tx)
• R1(config-if)# lldp receive => enables LLDP on specific interface (rx)
• R1(config)# lldp timer (seconds) => configure LLDP timer
• R1(config)# lldp holdtime (seconds) => configure LLDP holdtime.
• R1(config)# lldp reinit (seconds) => configure the LLDP reinit timer

• R1# show lldp => shows condition of LLDP and timers on router
• R1# show lldp traffic => shows traffic of LLDP
• R1# show lldp interface => shows interfaces with LLDP enabled
• R1# show lldp neighbors => shows LLDP neighbors
• R1# show lldp neighbors details => shows more detailed information about neighbors




### Day 37 Network Time Protocol (NTP) ###

all devices have an internal clock
in Cisco IOS, time can be viewed by `show clock` command:
• R1# show clock => it will show the default time zone coordiate UTC (Coordinated Universal Time)

if you use the `show clock detail` command, you can see the time source.
• R1# show clock detail
* => it means that time is not considered authoritative
the "Time source is hardawre calendar" => The hardware calendar is the default time source.

the internal hardawre clock of a device will drift over time, so it is not the ideal time source.
the most important reason to have accurate time on a device is to have accurate logs for troubleshooting.


command:
• R1# show log => shows all the logs that are related to the device (router). also the time of each log is important so `show clock` command should be checked before the show log command.


Manual Time Configuration
you can manually configure the time on the device with the `clock set` command
• R1# clock set (hh:mm:ss) (1-31 Day of the month) (Month of the year) (Year)
example:
• R1# clock set 14:30:00 26 Dec 2024 => sets the clock to the indicated time.

note:
although the hardware calendar (built-in clock) is the default time-source, the hardwawre clock and software clock are separate and can be configured separately.

manually configure the hardware clock with the `calendar set` command
• R1# calendar set (day of the month) (month) (year)
example:
• R1# calendar set 14:35:00 27 dec 2024

typically you will want to synchronize the 'clock and 'calendar'. 
use the command `clock update-calendar` to sync the calendar to the clock's time.
use the command `clock read-calendar` to sync the clock to the calendar's time.


Configuring the Time Zone
you can configure the time zone with the `clock timezone` command:
• R2(config)# do show clock => to check the clock time
• R2(config)# clock timezone (name-of-timezone) (-23 - 23 hours-offset-from-UTC) (0-59 Minutes offset from UTC)
but then the adjustment of time may be required:
• R2(config)# clock set(hh:mm:ss) (Day of the month) (month) (year)
example:
• R2(config)# clock timezone JST 9
• R2(config)#do clock set 15:10:00 Dec 27 2024

note:
become part of the running config, that is why it is configured in global config mode.


Daylight Saving Time (summer time): some countries depend on geological location need to set clock forward or backward each year

• R1(config)# clock summer-time (name of time zone in summer) (date | recurring) (week number to start | last/first week of the month) (Day) (month) (time to start hh:mm) (week number to end first/last <1-4>) (Weekday to end) (month to end) (hh:mm time to end) (<1-1440> Offset to ad in minutes)

example:
R1(config)# clock summer-time EDT recurring 2 sunday march 02:00 March 02:00 1 Sunday November 02:00


NTP (Network Time Protocol)
- Manually configuring the time on devices is not scalable and result to inaccurate time.
- NTP allows automatic syncing of time over a network.
- NTP clients euqest the time from NTP servers. a device can be an NTP server and an NTP client at the same time. 
- NTP allows accuracy if time within ~1milisecond if the NTP server is in the same LAN, or within ~50 miliseconds if connecting to the NTP sever over a WAN/the internet.
- Some NTP servers are 'better' than others due to distance of an NTP server. from the original reference clock is called "stratum". higher the stratum the more inaccurate the time is.
- NTP uses UDP port 123.


Reference Clocks
-a reference clock is usually a very accurate time device like an atomic clock or a GPS clock. Reference clocks are stratum 0 within the NTP hierarchy. NTP servers directly connected to reference clocks are stratum 1.
for instance
stratum 1: NTP servers get their time from reference clocks
stratum 2: NTP servers get their time from stratum 1 NTP servers.
stratum 3: get their time from stratum 2 NTP servers.
...
stratum 15: is the maximum. anything above that is considered unreliable.

- Devices can also 'peer' with devices at the same stratum to provide more accurate time. which is called "symmetric acitve" mode. Cisco devices can operate in three NTP modes:
Server mode, Client Mode, Symmetric active mode

- an NTP client can sync to multiple NTP servers

- NTP server which get their time directly from reference clocks are also called primary servers. NTP servers which get their time from other NTP servers are called secondary servers. secondary servers operate as server and client mode.


NTP Configuration:
multiple NTP servers can be defined for the device and devices will automatically select the best server that response faster.
• R1(config)#ntp server 216.239.35.0 => sets the ip for the NTP

for manually config and select a server, `prefer` option can be used
• R1(config)#ntp server 216.239.35.0 prefer

• R1# show ntp associations => it shows the ntp servers associated with device
in table of "ntp associatations":
*sys.peer: the ntp server that is synced with
+candiate: they are candidate server but are not synced
~configured: means configured 
-outlyer, xfalseticker: the NTP will not sync with those NTP servers.

• R1#show ntp status => to check NTP status running on Device

• R1(config)# ntp update-calendar => configures the router tp update hardware clock with the time learned via NTP

note: 
hardware clock initialize the software clock. its a good practice to keep it updated.


configure NTP server over a router:
first set a loopback interface and set it as a NTP server on a Router1
1.• R1(config)# interface loopback0
2.• R1(config-if)# ip address 10.1.1.1 255.255.255.255
3.• R1(config)# ntp source loopback0 => it sets the loopback interface to NTP source.

ntp master setting
• R1(config)# ntp master <1-15> => it sets the ntp master and if the stratum number is not defined it will set it to 8. cause 8 is the ntp default master stratum

ntp symmetric active mode:
• R3(config)#ntp peer (ip address of NTP server) => it will peer to that NTP server 

ntp authentication (optional)
it allows NTP clients to ensure they only sync to the intended server.
to configure NTP authentication:
ntp authenticate => enable authenticate
ntp authentication-key (key-number) md5 (key) => create the NTP authentication key(s)
ntp trusted-key (key-number) => specify the trusted key(s)
ntp server (ip-addresss) key (key-number) => specify which key to use for the server. (this command is not needed on server itself)



### Day 38 DNS (Domain Name Server) ###

DNS is used to resolve human-readable names to IP addresses.
When a domain name is searched in web browser, your device will ask a DNS server for the IP address of that domain name.

command:
• (windows) Ipconfig /all => for demonstrate the configuration of network over a device.
• nslookup (domain name) => for checking the DNS request and the IP address of the domain

Records:
A record: for map names of IPv4 addresses.
AAAA record: for map names of IPv6 addresses.
CName record : Canonical Name related to different zone for requesting DNS
note:
standard DNS queries/responses tupically use UDP port 53. TCP is used for DNS messages greater than 512 bytes or Zone Transfer

Devices will save the DNS server's responses to a local DNS cache. thus repetetive query is not require any more.

• (windows) ipconfig /displaydns => it shows the cached DNS record on Device.
• (windows) ipconfig /flushdns => to clear the device cache 


Host File:
host file is not DNS server, it is an alternative of DNS which it used to be use in OS for resolving IP/domains. 

DNS in Cisco IOS
- for hosts in a network to use DNS, there is no need to configure DNS on the router, they will forward the DNS messages.
- Cisco router can be configured as a DNS server, although it's rare.
- A cisco router can also be configured as a DNS client.

configuration:
1. • R1(config)# ip dns server => configures R1 to act as a DNS server. and response to host if it has the request.
2. • R1(config)# ip host R1 (IP address) => configurre a hostname/IP address for mapping
3. • R1(config)# ip name-server (DNS-server IP) => to set a NS for router to query the unkown records from other DNS server.
4. • R1(config)# ip domain lookup => enables R1 to perfomr DNS queries (enabled by default)

• R1(config)# show hosts => shows the cached entries on Router.

• R1(config)# ip domain name (example.com) => configures the deafult domain name. it appends to any hostnames without a specified domain.
example:
`ping pc1` will become `ping pc1.example.com`



### Day 39 DHCP (Dynamic Host Configuration Protocol)

DHCP is used to allow hosts to automatically/dynamically learn various aspects of their network configuration. such as IP address, default gateway, subnet mask, DNS server etc. Typically used for 'client devices' such as workstation, laptops,etc.
Devices like routers, servers, etc are usally manually configured because they need fixed IP address to function.

In small networks the router typically acts as the DHCP server for hosts in LAN. in large networks the DHCP server is used.

by using network management in windows (GUI) or command `ipconfig /all' (CLI) you can see the DHCP configuration on end hosts

note:
• (Preferred) tag in IPv4 Address means that the PC was previously assigned this IP address by the DHCP server. so it asked to receive the same address again this time.
• Lease Obtained/Expire: DHCP server ' lease' IP address to clients. these leases are usually not permanent, and the client must give up the address at the end of the lease time.

command:
ipconfig /all => shows all configuration of network specially the DHCP
ipconfig /release => it will release the IP address that has obtained from DHCP server
ipconfig /renew => ask DHCP server for a new IP address

DHCP procedures:
1. DHCP Discover: A broadcast massage that is sent from client asking for any DHCP server in the network (Broadcast)
1.2 DHCP release: it also release the IP address if any are exists. the IP address of the requester client will be 0.0.0.0 when requesting for IP and the IP is sent in unicast form (Unicast)

2. DHCP Offer: the DHCP will offer an address to the request of the Client. it will be a unicast due to MAC that is learned (Broadcast or Unicast

3.DHCP Request: it is the message that client sends to indicate that it wants to use  the IP that is offered (Broadcast)

4. DHCP Ack: it is an acknowledgement of DHCP server for the Request message of the client (Broadcast or Unicast)

DHCP D-O-R-A


DHCP Relay
Some network might configure routers to act as the DHCP server for connected LANs. but large enterpirses often use a centralized DHCP server.

if the server is centralized it won't receive the DHCP clients' broadcast DHCP messages.(broadcast messages don't leave the local subnet). to fix it, you can configure a router to act as a DHCP relay agent.
the router will forward the clients' broadcast DHCP messages to the remote DHCP server as unicast messages.


DHCP servr configuration in IOS
• R1(config)#ip dhcp excluded-address 192.168.1.1 192.168.1.100 => specify a range of addresses that won't be givent to the DHCP clients. (for example for further configuration)

• R1(config)#ip dhcp pool [name-of-pool] => it creates a DHCP pool with specificed name

• R1(dhcp-config)#network 192.168.1.0 /24 => specify the sbunet of addreses to be assigned to clients (expect th excluded addressses)

• R1(dhcp-config)#dns-server 8.8.8.8 => specify the DNS server that DHCP clients should use.

• R1(dhcp-config)#domain-name (example.com) specify the domain name of the network (ie PC1 = pc1.example.com)

• R1(dhcp-config)#default-router 192.168.1.254 => specify the default gateway

• R1(dhcp-config)#lease (day) (hours) (minutes) OR infinite => configure the lease time.

• R1#show ip dhcp binding => shows information about DHCP binds


DHCP relay Agent configuration in IOS
• R1(config)# interface g0/1 => configure the interface connected to the subnet of the client devices.

• R1(config-if)#ip  helper-address 192.168.10.10 => configure the IP address of the DHCP server as the 'helper' address. remember that it should have a route to that DHCP server destination IP


DHCP Client Configuration is IOS (rare and not common)
• R1(config)# interface g0/1 => selecting the interface that DHCP configuration needs to applied on

• R1(config-if)# ip address dhcp => use this mode to thell the router to use DHCP to learn its IP address.

• R1(config)#do show ip interface g0/1 => to check the IP address information about the DHCP received IP of that interface



### Day 40 SNMP ###
• Simple Network Management Protocol (SNMP) can be used to monitor the status of devices, make configuration changes, etc.

• There are two main types of devices in SNMP:
1. Managed Devices:
	- These are the devices being managed using SNMP like Routers and Switches.
2.Network Management Station/System (NMS)
	- The devices managing the manged devices
	-This is the SNMP server (but it is actually NMS)


SNMP Operations:
1. Managed devices can notify the NMS of events.
2. The NMS can ask the managed devices for information
3. The NMS can tell the managed devices to change aspects of their configuration


SNMP Components
• NMS components:
	- the SNMP Manager: is the software on the NMS that interfacts with the managed devices. it receives notification, sends requests for information and sends configurations
	- the SNMP Application: provides an interface for the network admin to interact with. Displays alerts, statistics, charts.

• Managed Devices:
	- SNMP Agent: is the SNMP software running on the managed devices that interfact with the SNMP manager on the NMS. it sends notifcations to/receives messages from the NMS.
	- The Management Information Base (MIB): is the structure that contains the variables that are managed by SNMP. Each variable is identified with tan Object ID (OID). for instance, interface status, traffic throughput, CPU usage. etc.


SNMP Object IDs are organized in a hierarchical structure.
.1.3.6.1.2.1.1.5 => 1.iso 3.indetified-organization 6.dod 1.internet 2.mgmt 1.mib-2 1.system 5.sysName
for more information check out oid-info.com


three versions of SNMP that are widely used:
SNMPv1
SNMPv2c
SNMPv3: much more secure version that supports strong encryption and authentication.


SNMP messages
message Class	Description									Messages
-Read			sent by the NMS to read information				Get, GetNext, GetBulk		
-Write			sent by the NMS to change information			Set
-Notification		Sent by managed devices to alert the NMS		Trap,Inform
-Response		sent in response to a previous message/request	Response

Read message:
Get: request sent from the manager to the agent to retrieve the value of a varialbe (OID) or multiple variables.
GetNext: a request sent from the manager to the agent to discover the available variables in te MIB.
GetBulk: a more efficient version of the GetNext message. introduced in SNMPv2

Write message:
Set: a request sent from the manage to the agent to change the value of one or more variables. then agent will send a response with new values.

Notifcation:
Trap: a notifcation sent from the agnet to the manager. manager does not send a Response to acknowledge, so these messages are 'unreliable'
Inform: a notification message that is acknowledged with a Response messages. it is used for communications between managers, but updated for agents too.


SNMP Ports:
SNMP Agent = UDP 161
SNMP Manager = UDP 162


SNMPv2c Configuration
• R1(config)#snmp-server [contact location] (gmail for contact or address for location) => optional information
• R1(config)#snmp-server community (password) ro/rw => configuring the SNMO community sttrings (passwords)
ro = read only = no set messages. rw = read/write = can use set messages.
• R1(config)#snmp-server host (ip address) version (2c) (password) => specify the NMS, version, and community.
• R1(config)#snmp-server enable traps snmp (linkdown linkup) or (trap config) => configure the Trap types to send to the NMS



### Day 41 Syslog ###
Syslog is and industry standard protocol for message logging.
on network devices, Syslog ca nbe used to log events such as changes in interface status (up/down), etc.
Logs are essentials when troubleshooting issues, examing the cuase of incidents, etc.


Syslog message format
seq:time stamp: %facility-severity-MNEMONIC:description
seq: => a sequence number indicating the order/sequence of messages.
time stamp: => a timestamp indicating the time the message was generated (may not be displayed on some devices)
facility => a value that indicates which process on the device generated the message
severity => a number that indicates the severity of logged events
MNEMONIC => a short code for the messages, indicating what happened.
description => detailed information about the event being reported.


Syslog Severity Levels
Level	Keyword			Description
0		Emergency		System is unusable
1		Alert			Action must be taken immediately
2		Critical			Critical conditions
3		Error			Error conditions
4		Warning			Warning conditions
5		Notice			Normal but signifcant condition (notification)
6		Informational		Informational emssages
7		Debugging		Debug-level mesages


Syslog Logging locations
Console line: syslog messages will be displayed in the CLI when connected to the devices via the console port.
VTY lines: syslog messages wil be dispalyed in the CLI when connected to the devices via Telnet/SSH
Buffer: syslog messages will be saved on RAM. yo can veiw the messages with `show logging`
External Server: you can configure the devices to send syslog messages to an external server. Syslog servers will lsiten for messages on UDP port 514.


Syslog Configuration
•R1(config)#logging console (level number/keyword) => configure logging to the console line it will log the levels higher than what is selected ( 6 to 0) or (5 to 0) higher means the severity.

•R1(config)#logging monitor (keyword ex: informational) => logging to the vty lines.

•R1(config)#logging buffer [size ex:8192] (level) => logging to the buffer

•R1(config)#logging (ip address) => to an external server
•R1(config)#logging host (ip address)

•R1(config)#logging trap (keyword) => this sets the logging level for the external NMS server


Terminal monitor
even if `logging monitor (level)` is enable, by default syslog messages will not be displayed when connected via Telnet or SSH.
for the messages to be displayed, you must use `terminal monitor` command. this command must be used every time you connect to the devices via Telnet or SSH.

logging synchronous
command `logging synchronous` for console logs should be used to enable synchronous logging in order to not interrupt on CLI commands. this will cause a new line to be printed if you typing is interrupted by a message.

different of Syslog and SNMP
syslog messages cannot be actively pulled or modified by server such as SNMP Get or SNMP Set.
syslog and SNMP are used together.



### Day 42 SSH (secure shell) ###

Console Port Security
by default no password is needed to access the CLI of a Cisco IOS devices via the console port.
however, you can configure a password on the console line.

• R1(config)#line console 0 => selecting the console 0 (it is always 0 cause only one single console line)
• R1(config)# password (password) => configure th console line's password.
• R1(config)# login => tell the device to require a user to enter the configured password to access.

console port security - login local
• R1(config)#login local => tell the devices to require a user to login using one of the configured usernames on the device.


Layer 2 Switch - Management IP
layer 2 switches don't perform packet routing. however, you can assign an IP address to an SVI (Switch Virtual Interface) to allow remote connection to the CLI of the switch (using Telnet or SSH).

command for configuration:
SW1(config)# interface vlan1
SW1(config)# ip address 192.168.1.253 255.255.255.0
SW1(config)# no shutdown
the commands above configure the IP address on the SVI in the same way as on a multiplayer swtich. enable the interface if necessary.

SW1(config)#ip default gateway 192.168.1.254 => configure the switch's default gateway. in this case, PC2 isn't in the same LAN as SW1. it won't work without default gateway.


Telnet 
Telnet (teletype Network) is a protocol used to remotely access to the CLI of a remote host. it sends data in plain text and No encryption,thus the data can be captured by wireshark. it is largely replaced by SSH for better security. telnet port is on 23

Telent configuration
• SW1(config)# enable secret (password) => enable password/secret. without it exec privileges will not be given.
• SW1(config)# access-list 1 permit host (ip address) => configure an ACL to limit which devices can connect to the VTY lines.
• SW1(config)# line vty 0 15 => telnet/SSH access can be configured for example 16 lines available so it means 16 users can be connected at once for virtual teletype.

• SW1(config-line)# transport input telnet => allows only Telnet connections.
• SW1(config-line)# transport input telnet ssh => allows both
• SW1(config-line)# transport input none => allows no connections.
• SW1(config-line)# transport input all => allows all

• SW1(config-line)# access-class 1 in => apply the ACL to the VTY lines.


SSH (secure shell)
there are two version of SSH, SSH & SSHv2 (which is more secure)
if a device supports both version 1 and 2, it is said tu run 'version 1.99' which it means that both can be supported. ssh is on port 22 TCP.

check SSH support
IOS images that support SSH will have 'k9' in their name exampe: vios_12-ADVENTERPRISEK9-M
NPE (No Payload Encrpytion) IOS images do not support cryptographic features such as SSH.

SSH RSA Keys (Rivest-Shamir-Adleman)
to enable and use SSH, you must generate an RSA public and private key pair.
the keys are used for data encrpytion/decryption, authentication,etc.

configuring RSA keys:
• SW1(config)#ip domain name (domainName) => the FQDN of the device is used to name the RSA keys FQDN = Fully Qualified Domain Name (host name + domain name)

• SW1(config)# crypto key generate rsa => generates the rsa key.

• SW1(config)#show ip ssh => will show the SSH status.

SSH configuration process:
1. Configure host name
2. Configure DNS domain name
3. Generate RSA key pair
4. Configure enabled PW, username/PW
5. Enable SSHv2 (only)
6. Configure VTY lines

Connect: ssh -l (username) (ip-address) or ssh username@ip-address

### Day 43 FTP (File Transfer Protocol) TFTP (Trivial File Trasnfer Protocol) ###
FTP and TFTP are industry protocol standard to transfer files over a network.
they both use a client-server model. Clients can use FTP or TFTP to copy files from/to a server.
as a network engineer, the most common use for FTP is in the process of upgrading the opearint system of a newtork device.
you can download a version of IOS from a server and then rebeoot the device with the new IOS image.

TFTP is a simple and has only basic features compared to FTP. it is another tool to use when lightweight simplicity is more important than functionality.
No authentication (username/password), so server will respond to all TFTP requests. no encryption, so al data is sent in plain text. so it is best used in controlled environment to transfer samll files quickly.
TFTP servers listen on UDP port 69. so it is connectionless and doesn't provide reliability. however, TFTP has similar built-in features for reliability.

TFTP uses 'lock-step' communication. The cloent and server alternately send a message and then wait for a reply. (+retransmissions are sent as needed)

TFTP file transfers have three phases:
1. Connection TFTP client sends a request to the server, and the server responds back, initializing the connection.
2. Data Tranfer: the client and server exchange TFTP messages. one sends data and the other sends acknowledgements.
3. Connection Termination: After the last data message has been sent, a final acknowledgment is sent to terminate the connection.

TFTP TID
when a client sends the first message to the server, the destination port is UDP 69 and the source is a random ephemeral port.
This random port is called a 'Tranfer Identifier' (TID) and indetifies the data transfer.
The server then also selects a random TID to use as the source port when it replies, not 69.
When the client sends the next message, the destination port will be the server's ID, not 69.


FTP uses TCP ports 20 and 21
username and passwords are used for authentication, however there is NO encryption.
For Greater security, FTPS (FTP over SSL/TLS) can be used.
SSH File transfer Protocol (SFTP) can also be used for greater security.
FTP is more ocmple than TFTP and allow clients to navigate file directories, add and remove directory, list files, etc.
the client sends FTP commands to the server to perform these functions.

FTP uses two types of connections:
	- an FTP control connection (TCP 21) is established and used to send FTP commands and replies.
	- When files or data are to be transferred, separate FTP data (TCP 20) connections are establisehd and terminated as needed.

FTP modes:
1. Active Mode FTP data connections
	- The default method of establishin FTP data connection is active mode, in which the server initiates the TCP connections.
	- in FTP active mode, the server initiates the data connection.
2. Passive Mode FTP data connections.
	- the client initiates the data conneciton. this is often necessary when the client is behind a firewall, which could blco kthe incoming connection from the server.
note: firewalls usually don't permit 'outside' devices to initiate connections. in this case FTP passive mode is used and the client (behind firewall) initiates the TCP connection.


IOS file Systems:
a file system is a way of controlling how data is stored and retrieved.
you can view the file systems of a Cisco IOS device with `show file systems`:
tables of show file systems command:
Type:
- disk: storage devices such as flash memory
- opaque: used for internal functions
- nvram: internal NonVolatileRAM. the startup-config files are stored here.
- network: Represents external file systems, for example external FTP/TFTP servers.


Updating Cisco IOS
• R1# show version => you can veiw the current version of IOS with show version of IOS
• R1# show flash => you can veiw the content of flash. ( the  file are are with .bin , .xlm extension)

Copying Files (TFTP)
•R1# copy (src) (dst). example:
 • R1# copy tftp: flash: => it tells the router that you want to have access to TFTP server and copy file to destination which is flash. so Router will ask you to Enter the TFTP server IP. and then the source file name on the server. then you need to enter the name you want to save it as on flash (hit enter to accept the default which is hold in [ ])

upgrading new cisco IOS bin file:
1. • R1(config)# boot system (filepath) => it will reboot the devices with the file that is named which can be the updated file. if you don't use this command, the router will use the first IOS file that it finds in flash.
2. • R1# write memory => you should write it on memory, otherwise, it won't be saved.
3. • R1#reload => should be reload to load new configuration.

Deleting File (lets delete that old IOS file):
• R1#delete (filepath) => it will delete the file with the matched filepath (which can be name of the old IOS file).


Copying Files (FTP)
• R1(config)# (ip-address) ftp (username) (password) => configure the FTP username/password that the device wil use when connecting to an FTP server.



### Day 44 NAT (Network Address Translate) Static addressing ###
There are three main short-term solutions for IPv4 inadequacy:
1) CIDR
2) Private IP addresses
3) NAT

in RFC 1918 specifies the following IPv4 address ranges as private:
10.0.0.0/8 (10.0.0.0 to 10.255.255.255) Class A
172.16.0.0/12 (172.16.0.0 to 172.31.255.255) Class B
192.168.0.0/16 (192.168.0.0 to 192.168.255.255) Class C
you are free to use this addresses and they don't have to be globally unique.
Private IP addresses cannot be used over the internet and will be dropped by ISP, thus the NAT is used.
NAT can be used to router private IP address out in the Internet. it translate the Private IP to Public IP address which should be unique.

Network Address Translation (NAT) is used to modify the source and/or destination IP addresses of packets.
note: NAT in Cisco is more focused on Source NAT and configuration happens on Cisco Routers.


Static NAT:
it involves statically configuring one-to-one mappings of private IP addresses to public IP addresses.
When traffic from the internal host is sent to the outside network, the router will translate the source adddress. however, this one-to-one mapping also allows external host to access the internal host via the inside global address.

An inside local IP address is mapped to an inside global IP address.
	- Inside Local: The IP address of the inside host, from the perspective of the local network
		*the IP address actually confiugred on the inside host, usually a private address.
	- Inside Global: The IP address of the inside host, from the perspective of outside hosts
		*the IP address of the inside host after NAT, usually a public address.

Note:
Static NAT allows devices with private IP addreses to communicate over the internet, However, because it requires a one-to-one IP address mapping, it doesn't preserve IP address.

Static NAT Configuration
1. Define the inside interface(s) connected to the internal network
• R1(config)# int g0/1
• R1(config-if)#ip nat inside
2. Define the outside interface(s) connected to the external network
• R1(config)#int g0/0
• R1(config-if)#ip nat outside
• R1(config-if)# exit
3.configure the one-to-one IP address mappings: `ip nat inside source static (inside-local-ip) (inside-global-ip). each are set for different end-hosts.
• R1(config)# ip nat inside source static 192.168.0.167 100.0.0.1 -> for end-host1
• R1(config)# ip nat inside source static 192.168.0.168 100.0.0.2 -> for end-host2
note: it won't be over write if multiple hosts are translated to one single outside IP
4. check the IP NAT tabel
• R1(config)# ip nat translations => it shows PAT (port address translation), Protocols, and address of outside local, outside global, inside local, inside global.

	- Outside Local: The IP address of the outside host, from the perspective of the local network
	- Outside global: the IP address of the outside host, from the perspective of the outside network.

Insdie/Outside = Location of the host
Local/Global = Perspective


Command to clean ip nat translationt table
• R1#clear ip nat translation * => it cleans the table for further logs.

• R1#show ip nat statistic => it shows all the status of NAT on router.




### Day 45 NAT Dynamic 2/2 ###
• in dynamic NAT, the router dynamically maps inside local addresses to inside global addresses as needed.
• an ACL is used to identify which traffic should be translated.
	- if the source IP is permitted by the ACL, the source IP will be translated.
	- if the source IP is denied by the ACL, the source IP will not be translated. remember that it doesn't mean that it will be dropped.
• A NAT pool is used to defined the available inside global addresses that can be used.
• Although they are dynamically assigned, the mappings are still one-to-one ( one inside local IP address per inside global IP address)
• if there aren't enough inside global IP addresses available (all are currently being used), it is called NAT pool exhaustion:
	- if a packet from another inside host arrives and needs NAT but there are no available addresses, the router will drop the packet.
	- the host will be unable to access outside networks until one of the inside global IP addresses becomes available.
	the dynamic NAT entries will time out automatically if not used, or can clear them manually.


Dynamic NAT configuration
1. Define the inside interface(s) connected to the internal network
• R1(config)# int g0/1
• R1(config-if)#ip nat inside
2. Define the outside interface(s) connected to the external network
• R1(config)# int g0/0
• R1(config-if)#ip nat outside
3. Define the traffic that should be tanslated. traffic permitted by the ACL will be translated.
• R1(config)#access-list 1 permit 1921.168.0.0 0.0.255.255
4. Define the pool of inside gloabl Ip addresses. note: instead of prefix-length 24, you can use netmask 255.255.255.0
• R1(config)#ip nat pool POOL1 100.0.0.0 100.0.0.255 prefix-length 24
5. configure dynamic NAT by mapping the ACL to the pool
• R1(config)#ip nat inside source list 1 pool POOL1
. for checking out:
• R1(config)#show ip nat translations => show translating table of router
• R1(config)#show ip nat statistics => shows the status of NAT configuration on router.


PAT (Port Address Translation) (NAT Overload)
PAT (Aka NAT overload) tansaltes both the IP address and the port number (if necessary).
by using a unique port number for each communication flow, a single public IP address can be used by many different internal hosts. (port number are 16bits = over 65000 available port numbers)
the router will keep track of which inside local address is using which inside global address and port.
because many inside hosts can share a single public IP, PAT is very usefull for preserving public IP addresses, and it is used in networks all over the world.

PAT Configuration (pool)
1. Define the inside interface(s) connected to the internal network
• R1(config)# int g0/1
• R1(config-if)#ip nat inside
2. Define the outside interface(s) connected to the external network
• R1(config)# int g0/0
• R1(config-if)#ip nat outside
3. Define the traffic that should be tanslated. traffic permitted by the ACL will be translated.
• R1(config)#access-list 1 permit 1921.168.0.0 0.0.255.255
4. Define the pool of inside gloabl Ip addresses. note: instead of prefix-length 24, you can use netmask 255.255.255.0
• R1(config)#ip nat pool POOL1 100.0.0.0 100.0.0.3 prefix-length 24
5. Configure PAT by mapping the ACL to the pool and using overloda keyword at the end.
• R1(config)#ip nat inside source list 1 pool POOL1 overload

note:
in `show ip nat translations` for PATH there is no one-to-one mapping, there are many-to-one mapping due to ports.


PAT Configuration (interface)
1. Define the inside interface(s) connected to the internal network
• R1(config)# int g0/1
• R1(config-if)#ip nat inside
2. Define the outside interface(s) connected to the external network
• R1(config)# int g0/0
• R1(config-if)#ip nat outside
3. Define the traffic that should be tanslated. traffic permitted by the ACL will be translated.
• R1(config)#access-list 1 permit 1921.168.0.0 0.0.255.255
4.Configure PAT by mapping the ACL to the interface and enabling overload.
• R1(config)#ip nat inside source list 1 interface g0/0 overload 
note:
that it will use the Router interface public IP address for translating 



### Day 46 QoS (Quality of Service) 1/2 ###
firstly, lets talk about IP phones because they are one of the Topics for QoS.
IP Phones
Traditional phones operate over the public swtiched telephone network(PSTN), sometimes this is called POTS(Plain Old Telephone Service).
IP phones use VoIP(Voice over IP) technologies to enable phone calls over an IP network, such as the internet.
IP phones are connected to a switch just like any other end host.

IP phones have an internal 3-port switch.
	- 1 portis the 'uplink' to the external swtich
	- 1 port is the 'downlink' to the PC
	- 1 port connects internally to the phone itself.
This allows the PC and the IP phone to share a single switch port. Traffic from the PC passes through the IP phone to the switch.

It is recommended to separate 'voice' traffic (from the IP phone) and 'data' traffic (from the PC) by placing them in separate VLANs.
	- This can be accomplisehd using a voice VLAN.
	- Traffic from the PC will be untaged, but traffic from the phone will be tagged with a VLAN ID.

configuration:
• SW1(config-if)# interface gigabitethernet0/0
• SW1(config-if)# switchport access vlan 10
• SW1(config-if)# switchport voice vlan 11
with the configuration above PC will send traffic untagged, as normal. SW1 will use CDP to tell Phone1 to tag Phone1's traffic in VLAN 11

note:
as you know for sending multiple data over a single port, trunk is being used but, by using `show interfaces g0/0 switchport ` you will see that interface g0/0 is static access.
althoug hthe interface sends/receives traffic from two VLANs, it is not considered a trunk port. it is considere dan access port.


PoE (Power over Ethernet)
PoE allows Power Sourcing Equipment (PSE) to provide power to Powered Devices (PD) over an Ethernet cable.
Typically the SPE is a switch and the PDs are IP phones, IP caemras, wireless access points, etc.
The PSE receives AC power from the outlet, converts it to DC power, and supplies that DC power to the PDs.
PoE has a process to detemine if a connected device needs power, and how much power it needs.
	- When a device is connected to a PoE-enabled port, the PSE sends low power signals, monitors the response, and determines how much power the PD needs. it is called power policing.
Power Policing can be cofigured to prevent a PD from taking too much power.

Commands:
• SW1(config-if)# power inline police => it is equivalent of `power inline police action err-disable` which cinfogure power policing with the default setting: disable the port and send a syslog message if a PD draws too much power.
• SW1(config-if)# power inline police action log => does not shutdown the intrface if the PD draws too much power. it will restart the interface and send a syslog message.
• SW1# show power inline police (interface) => will show status of power line of that interface

Note:
we have different PoE with different standards such as PoE+(Type 2, Standard:802.3at) or UPoE+ (Type 4, Standard:802.3bt)


QoS
voice traffic and data traffic used o use entirely separate networks:
	- Voice traffic used the PSTN
	- Data traffic used the IP network (enterprise WAN, Internet, etc)
however, modern networks are typically converged networks in which IP phones, video Traffics, etc, all share the same IP network. this enables cost savings as well as more advanced features for voice and video traffic. for example integration with collaboration software (Cisco WebEx, etc)
however, the different kinds of traffic now have to compete for bandwidth.
QoS is a set of tools used by network devices to apply different treatment to different packets.


QoS is used to manage the following characteristics of network traffic:
1. Bandwidth
	The overall capacity of the link, mesaured in bits per second(Kbps, Mbps, Gbps, etc)
	QoS tools allow you to reserve a certain amount of a link's bandwidth for specific kinds of traffic. for eaxmple: 20% voice traffic, 30% for specific kinds of data traffic, leaving 50% for all other traffic.

2. Delay
	The amount of time it takes traffic to go from source to destination = way-way delay
	The mount of time it takes traffic to go from source to destination and return = two-way delay

3. Jitter
	The variation in one-way delay between packets sent by the same application
	IP phones have a 'jitter buffer' to provide a fixed delay to audio packets.

4. Loss
	The % of packets sent that do not raech their destination
	Can be caused by faulty cables.
	Can also be caused when a devices' packet queues get full and the device starts discarding packets.

Standards are recommended for acceptable interactive audio (ie: phone call, video call) quality:
	one-way delay: 150ms or less
	Jitter: 30 ms or less
	Loss: 1% or less


QoS - Queuing
If a network device receives messages faster than it can forward them out of the appropriate interfacem the messages are plced in a queue.
by default, queued messages will be forwarded in a First In First Out (FIFO) manner. if the queue is full new packets will be dropped. This is called tail drop.
Tail Drop can lead to TCP global synchronization.

TCP sliding window:
	host using TCP use the 'sliding window' increase/decrease the rate at which they send traffic as needed.
	when a packet is dropped it will be re-trasnmitted.
	when a drop occurs, the sender will reduce the rate it sends traffic.
	it will then gradually increase the rate.
when the queue fills up the tail drop occurs, all TCP host sending traffic will slow down the rate at which they send traffic.
they will all then increase the rate at which they send traffic, which rapidly leads to more congestion, dropped packets, and the process repeats again.
Network congestion -> Tail Drop -> Global TCP window size decrease -> Network underutilized -> Global TCP window size increase -> Network congestion ...

Solution to prevent tail drop and TCP global synchronization wave is Random Early Detection (RED).
when the amount of traffic in the queue reaches a certain threshold, the device will start randomly dropping packets from select TCP flows.
In standard RED, all packets are treated the same.
an improved version, Weighted Random Early Detection (WRED), allows you to control which packets are dropped depending on the traffic class.



### Day 47 QoS 2/2 ###
the purpose of QoS is to give certain kinds of network traffic priority over others during congestion.

Classification 
Classification organized network traffic (packets) into traffic classes (categories)
classification is fundamental to QoS. to give priority to certain types of traffic, you have to identify which type of traffic to give priority to.

there are many methods of classifying traffic. some examples:
	- an ACL. traffic which is permitted by the ACL will be given certain treatment, other traffic wil not
	-NBAR (Network Based Application Recognition) performs a deep packet inspection, looking beyong the Layer 3 and Layer 4 information up to Layer 7 to identify the specifci kind of traffic.
	- In the Layer 2 and Layer 3 headers there are specific fileds used for this purpose.

The PCP (Priority Code Point) field of the 802.1Q tag (in the Ethernet header) can be used to identify high/low priority traffic. only when there is a dogt1q tag. it is also known as COS (Class Of Service. its use is defined by IEEE 802.1p

the DSCP (Differentiated Services Code Point) field of the IP header can also be used to identify high/low priority traffic.


PCP/COS
PCP or known as COS is 3 bits (8 possible values. 2^3 =8) value field inside Ethernet Header which defines the Priority of Traffic.

PCP Value		Traffic Types
0				Best Effort (default)
1				Background
2				Excellent effort
3				Critical applications
4				Video
5				Voice
6				Internetwork control
7				Network control

* 'best effort' delivery means there is no guarantee that data is delivered or that it meets any QoS standard. This is regular traffic, not high-priority.
* IP phones mark call signaling traffic (used to establish calls) as PCP3.
they mark the actual voice traffic as PCP5.

Because PCP is found in the dot1q header, it can only be used over the following connections:
	- trunk links
	- access links with a voice VLAN
note:
traffic in external destinations will not have a dot1q tag, like router. so traffic over those links will not be marked with a PCP value. it is a limitation which layer 3 classification methods don't have.


The IP ToS (Type of Service) byte
in IP headers we also have a ToS field which contains the DSCP (Differentiated Services Code Point) and ECN (explicit congestion Notification) with 6 bits = 64 values (0-63). 
however in old ToS byte it was contained IPP (IP precedence) which only 3 bits where is used. 3 bits = 8 values (0-7)

IP Precedence
Standard IPP markings are similar to PCP. the values between 0 to 7 and in which 7 and 6 are reserved. for network control traffic.

DSCP (Differentiated Services Code Point)
DSCP(6bit)  ECN(2bits) => 6 bits = 64 values (0-63)
With IPP updated to DSCP, new standard markings had to be decided upon.
	- Default Forwarding (DF) - best effort traffic
	- Expedited Forwarding (EF) - low loss/latency/ jitter traffic (usually voice)
	- Assured Forwarding (AF) = A set of 12 standard values
	- Class Selector (CS) - A set of 8 standard values, provides backward compatibility with IPP

DF (Default Forwarding):
bits are => 000000
DF is used for the best-effort traffic.
The DSCP marking for DF is 0

EF(Expedited Forwarding)
EF is used for traffic that requires low loss/latency/jitter
THe DSCIP marking for EF is 46 => bits are 101110

AF (Assured Forwarding) defines four traffic classes. All packets in a class have the same priority.
Within each class, there are three levels of drop precedence.
	- higher drop precedence = more likely to drop the packet during congestion
'000' '00' '0' = 'Class' 'Drop Precedence' 'Always 0' => AF'XY'
for example:
001010 => AF11: which will be equal to DSCP 10
001100 => AF12: which will be equal to DSCP 12
010110 => AF23: which will be equal to DSCP 22
Formula to conver from AF value to decimal DSCP value: 8X + 2Y

AF41 (34) will get the best treatment
AF13 (14) will get the wort treatmentl


CS (Class Selector) defiens eight DSCP values for backward compatibility with IPP
there are three bits that were added for DSCP are set to 0, and the origibal IPP bits are used to make 8 values.
IPP:  0		1		2		3		4		5		6		7
CS:  CS0		CS1		CS2		CS3		CS4		CS5		CS6		CS7
DSCP: 0		8		16		24		32		4O		48		56


RFC	4954
this RFC was developed to bring all of values together and standardize their use.
- Voice traffic: EF
- Interactive video: AF4x
- Streaming video: AF3x
- High Priority data: AF2x
- Best effort: DF


Trust Boundaries
the turst boundary of a network defines where deviecs trust/don't trust the QoS markings of received messages.
if the markings are trusted, the devices will forward it. if not the device will change the markings according to the configured policy.
Recommendation:
if an IP phone is connected to the swtich port, it is recommended to move the trust boundary to the IP phones.
this is done via configuration on the swtich port connected to the IP phone.
		

Queuing/Congestion Management
When a network device receives traffic at a faster rate than it can forward the traffic out of the appropriate interface, packets are placed in that interface's queue as they wait to be forwarded.
when the queue becomes full, packets that don't fit in the queue are dropped (tail drop)
RED and WRED drop packets early to avoid tail drop.

An essential part of QoS is the use of multiple queues.
	- This is where classification plays a role. the device can match traffic based on various factors (for example the DSCP marking in the IP header) and then place it in the appropriate queue.
	- However, the device is only able to forward one frame out of an interface at once, so a scheduler is used to decie which queue traffic is forwarded from next.
		- Prioritization allows the scheduler to give certain queues more priority than others.

Steps are:
ingress traffic -> (routing, etc) -> Classification -> queuing -> scheduling -> transmission.

A common scheduling method is weighted round-robin.
	round-robin: packets are taken from each queue in order, cyclically.
	weighted: more data is taken from high priority queues ecah time the scheduler reaches that queue

CBWFQ(Class-based Weighted Fair Queuing) is a popular method of scheduling, using a weighted round-robin scheduler while gauranteeing each queue a certain percentage of the interace's bandwidth during congestion.

Round-robing scheduling is not ideal for voice/video traffic. even if the voice/video traffic receives aguaranted minimum amount of bandwidth, round-robin can add delay and jitter.

LLQ (Low Latency Queuing) designateds one (or more) queues as stricts priority queues.
	- This means that if there is traffic in the queue, the scheduler will always take the next packet from that queue untill it is empty
this is very effective for reducing the delay and jitter of voice/video traffic.
• however, it has the downside of potentially starving other queues if there is always traffic in the designated strict priority queue.
• Policing (next slide) can control the amount of traffic allowed in the strict priority queue so that it can't take all of the ;inks' bandwidth.


Shaping and Policing
Traffic shaping and policing are both used to control the rate of traffic.
• Shaping buffers traffic in a queue if the traffic rate goes over the configured rate.
• Policing drops traffic if the traffic rate goes over the confgured rate.
note: policing also has the option of re-marking the traffic instead of dropping it.
	- Burst traffic over the configured rate is allowed for a shrot period of time.
	- this accomodates data application which typically are 'bursty'. 
	- the aount of burst traffic allowed is configurable
in both cases, classification can be used to allow for different rates for different kinds of traffic.



### Day 48 Security Fundamental ###

The Principle of the CIA Triad from the foundation of security:
1. Confidentiality:
	- Only authorized users should be able to access data. some data is public but some is secret and should be only be accessed by specific people.
2. Integrity
	- Data should not be tampered with (modified) by unauthorized users and should be correct and authentic
3. Availability
	- The network/system should be operational and accessible to authorized users.

Attackers can threaten the confidentiality , integrity, and available of an enterprise's systems and information.


Terms
• A Vulnerability is any potential weakness that can compromise the CIA of a system/info.
	- A potential weakness isn't a problem on its own.
• An Exploit is something that can potentially be used to exploit the vulnerability.
	- Something that can potentially be used as an exploit isn't a problem on it's own
• A Threat is the potential of a vulnerability to be exploited
	- A hacker exploiting a vulnerability in your system is a threat.
• A mitigation technique is something that can protect against threats.
	- Should be implemented everywhere a vulnerablitiy can be exploited: client devices, server,s swtiches, routers, firewalls, etc.


Common Attacks:
• DoS (denial of service) attacks
• Spoofing attacks
• Reflection/amplification attacks
• Man-in-the-middle attacks
• Reconnaissance attacks
• Malware 
• Social engineering attacks
• Password-related attacks


• DoS (Denial-of-Service) attacks
DoS attacks are targeting the A in Triad which is accessibility
one common DoS attack is the TCP SYN flood:
• TCP has three-way handshake: SYN | SYN-ACK | ACK
1. the attacker send countless TCP-SYN messages to the target.
2. the target sends a SYN-ACK message in reponse to each SYN it receives.
3. the attacker never replies with the final ACK of the TCP three-way handshake
4. incomplete connections fill up the target's TCP connection table.
5. the attacker continues sending SYN messages.
6. the target is no longer able to make legitimate TCP connection.

• DDoS (Distributed Denial-of-Service) Attacks: the attacker infect many target computer with malware and uses them all in initiate a denial-of-service attack. for exmaple a TCP SYN Flood attack.
this group of infected computers is called a botnet.


• Spoofing attacks
To spoof an address is to use a fake source address (IP or MAC address)
for instance, it can be used to cause DHCP exhaustion attack.
an attacker uses spoofed MAC addresses to flood DHCP Discover messages. The target server's DHCP pool becomes full, resulting in a denial-of-service to other devices.


• Reflection/Amplification attacks
In a reflection attack, the attacker sends traffic to a reflector, and spoofs the source address of its packets using the target's IP address.
the reflector (ie. a DNS server) sends the reply to the target's IP address
if the amount of traffic sent to the target is large enough, this can result in a denial-of-service
A reflection attack becomes an amplification attack when the amount of traffic sent by the attacker is small, but it triggers a large amount of traffic to be sent from the reflector to the target.


• man in the middle attack
in this attack, the attacker places himself between the srouce and destination to eavesdrop on communications, or to modify traffic before it reaches the destination.
a common example is ARP spoofing, also known as ARP poisoning.
a host sends an ARP request, asking for the MAC adress of another device.
the target of the request sends an ARP reply, informing the requester of its MAC address.
the attacker waits and sends another ARP reply after the legitimate replier. 
If the attacker's ARP reply arrives last, it will overwrite the legitimate ARP entry in PC1's ARP table

attacker can inspect or modify the transfering data and forwards it to destinations. this compromises the Confidentiality and Integrity of communication.


• Reconnaissane attack
Reconnoaissance attacks aren't attacks themselves, but they are used to thater information about a target which can be used for a future attacks.
example of that is:
nslookup to learn the IP address of a site.
or a WHOIS query to learn email addresses, phone numbers, physical addresses, etc.


• Malware (malicious software)
Malware referes to a variety of harmful programs that can infect a computer.
- Viruses: infect oher software (a 'host program'). The virus spreads as the software is shared by users. typically they corrupt or modify files on the target computer.
- Worms: do not require a host program. they are standalone malware and they ae able to spread on their own, without user interaction. it can carry 'pay loader' and can cause additional harm to target device.
- trojan horses: they are harmful software that is disguised as legitimate software. they are spread through user interaction uschas opening email attachments, or downloading a file from the internet.
- etc.


• Social Engineering attacks
Social enginnering involve psychological manipulation to make the target reveal confidentail information or perform some actions that don't directly affect on IT team of a company.
- Phishing: typically involves fradulent emails that appear to come from a legitimate business and contain links to a fraudulent website that seems legitimate.
	- spear phishing is a more targeted from a phishing. ie. aimed at employees of a certain company.
	- whaling is phishing targeted at high-profile individuals. ie. a company president
- Vishing (voice Phishing): is phishing performed over the phone
- Smishing (SMS phishing): is pihshing using SMS text messages.

- Watering hole: attacks compromise sites that the target victim frequently visits. if a malicious link is placed on a website the target trusts, they might not hesitate to click it.

- Tailgating: attacks involve entering restricted, secured areas by simply walking in behind an authorized person as they enter.


• Password-related attacks
the most system use a username/password combination to authenticate users.
attackers can learn a user's passwords via mutiple methods:
	- Guessing
	- Dictionary attack: A program runs throug ha 'dictionary' or list of common words/passwords to find the target's password.
	- Brute force attack: A program tries every possible combination of letters, numbers, and special characters to find the target's password. that is why at LEAST 8 characters (preferably more) and special characters are used.


Multi-factor Authentication 
multi-factor authentication involves providing more that just a username/password to prove your identity.
items that are used:
	- Something you know: a username/password combination
	- something you have: a pressing a notification that appears on your phone, badge scanner, etc
	- something you are: biometrics such as a face, palm scan. etc.

Requiring multiple factors of authentication greatly increases the security.


Digital certificates
Digital certificates are another form of authentication used to prove the identity of the holder of the certificate.
Entities that want a certificate to rpove their identity their identity send a CSR (Certificate Signing Request) to a CA (Certificate Authority). which will generate and sign the certificate.


Controlling and monitoring users with AAA
AAA (triple A) stands for Authentication, Authorization, and Accounting.
it is a framework for controlling and monitoring users of a computer system (ie. a network)
- Authentication is the process of verifying a user's identity. for example logging
- Authorization is the process of granting the user the appropriate access and permissions.
- Accounting is the process of recording the user's activities on the system.

Enterprises tpically use a AAA server to provide AAA services
	- ISE (Identify Service Engine) is Cisco's AAA server.

AAA servers usually support the followjng two AAA protocols:
	- RADIUS: an open standard protocol. uses UDP ports 1812 and 1813
	- TACACS: a CIsco propriety protocol. uses TCP prot 49


Security Program elements:
- User awareness: program are desgined to make emplyees awae of potential security threats and risk. for example preparing a harmless simulating and testing employees on security.
- User training: program are more formal than user awareness programs. for example dedicating training sessions.
- Physical access control: protects equipment and data from ptential attackers by only allowing authorized users ito protected areas such as network closets or data center floors. like multifactor locks.



### Day 49 Port Security ###
Port security is a security feature of Cisco swtiches, it allows you to control which source MAC address(es) are allowed to enter the switchport. if an unauthorized source MAC address enters the port, an action will be taken.
	- The default action is to place the interfcae in an 'err-disable' state for the unauthorized source MAC address.

When you enable port security on an interface with the default settings, one MAC address is allowed.
	- you can configure the allowed MAC adddress manually.
	- if you don't configure it manually, the switch will aloow the first source MAC adress that enters the interface.
You can change the maximum number of MAC address allowed.
A combination of manually configured MAC addresses and dynamically learned addresses is possible.

However, MAC address spoofing is a simple task.
	- its easy to configure a device to send frames with a different with a different source MAC address.
Rather than manually specifying the MAC addresses allowed on each port, port security's ability to limit the number of MAC addresses allowed on an interface is more useful.
example: think of the DHCP starvation attack and the way it can be prevented.


Enabling Port Security
Port security can be enabled on access port or trunk ports, but they must be statically configured as access or trunk and cannot be configured on dynamic ports.
• SW1(config)# interface g0/1
• SW1(config-if)# switchport port-security

use `• SW1(config)#do show interface g0/1 switchport` => checks the status in administrative mode.

• SW1# show port-security interface (interface) => shows the port-security status.


Re-enabling an interface (manually)
before re-enabling the interface, disconnect the unauthorized device and then shutdown and then no shutdown the interface
• SW1(config)# interface g0/1
• SW1(config)# shutdown
• SW1(config)# no shutdown


Re-enabling an interface (ErrDisabled Recovery)
It causes the err-disabled interfaces to be automatically re-enabled after a certian period of time.
there are actually various reasons an interface can enter an err-disabled state.
• SW1# show errdisable recovery => it shows list of all reasons
note:
every 5 minutes (by default), all err-disabled interfaces will be re-enabled if err-disabled recovery has been enabled.

the command for enabling the recovery:
• SW1(config)# errdisable recovery cause psecure-violation
• SW1(config)# errdisable recovery interval (time in second, ie: 180)

Errdisable Recovery is useless if you don't remove the cause of err-disabling


Violation Modes
the re are three different violation modes that determine what the switch will do if an unauthorized frame enters an interface configured with port security.
1. Shutdown
	- Effectively shuts down the port by placing it in an err-disabled state.
	- Generates a Syslog and/or SNMP message when the interface is disabled.
	- The violation counter is set to 1 when the interface is disabled.
2. Restrict
	- The switch discards traffic from unauthorized MAC addresses.
	- the interface is NOT disabled
	- Generates a Syslog and/or SNMP message each time an unauthorized MAC is detected.
	- The violation counter in incremented by 1 for each authorized frame
3. Protect
	- same as the Resticts but it doesn't generate Syslog/NSMP messages. and it does NOT increment the violation counter.

Commands for violation mode
• SW1(config-if)#switchport port-security
• SW1(config-if)#switchport port-security mac-address (000a.000a.000a)
• SW1(config-if)#switchport port-security violation ( restrict | protect )

• SW1# show port-security interface (interface) => for status.


Secure MAC address aging
• By default secure MAC addresses will not 'age out' (Aging Time : 0 mins)
	- Can be configured with `switchport port-security agint time (minutes)`
• The default aging type is Absolute:
	- Absolute: After the secure MAC address is learned, the aging timer starts and the MAC is removed after the timer expires, even if the switch continues receiving frames from that source MAC address.
	- Inactivity: After the secure MAC address is learned, the aging timer start but is reset every time a frame from that source MAC address is received on the interface.
	- Aging type is configured with `switchport port-security aging type (absolute | inactivity)`

Secure Static MAC aging (addresses configured with `switchport port-security mac-address (x.x.x)) is disabled by default.
can be enabled by `switchport port-security aging static.


Sticky Secure MAC addresses.
WHen you issue the `switchport port-security mac-address sticky` command, all current dynamically-learned secure MAC addresses will be converted to sticky secure MAC addresses.
`no switchport port-security mac-address sticky` will convert all MAC addresses to regular dynamically-learned secure MAC addresses.

the sticky secure MAC addresses will never age out.
	- you need t osave the running-config to the startup-config to make them truly permanent. (or else they will not be kept if the switch restarts)

overall of MAC address table:
	- Sticky and Static secure MAC addresses will have a type of STATIC
	- Dynmically-learned secure MAC addresses will have a type of Dynamic
	- You can view all secure MAC addresses with `show mac address-table secure`



### Day 50 DHCP Snooping ###
DHCP Snooping is a security feature of "switches" that is used to filter DHCP messages received on untrusted ports.
DHCP snooping only filters DHCP messages. Non-DHCP messages aren't affectec.
All ports are untrusted by default. usually, uplink ports (point away toward infrustructure) are configured as trusted ports, and downlink ports (connected to end hosts) ports remain untrusted. so traffic from end hosts are examined.
DHCP snooping can help to prevent DHCP spoofing. or DHCP poisoning (Man-in-the-middle)

DHCP Poisoning:
similar to ARP Poisoning, DHCP poisoning can be used to perfomr a man-in-the-middle attack.
a spurious DHCP server replies to client's DHCP discover messages and assigns them IP addreseses, but makes the client use the spurious erver's IP as the default gateway.
the attacker can examine/modify the trafic before forwarding it to the legitimate default gateway.


when DHCP snooping filters messages, it differentiates between DHCP server messages and DHCP client messages.
DHCP messages:
• Messages sent by DHCP Servers:
	- OFFER
	- ACK
	- NACK: opposite of ACK, used to decline a client's REQUEST
• Messages sent by DHCP Clients:
	- DISCOVER
	- REQUEST
	- RELEASE: Used to tellthe server that the client no longer needs its IP address
	- DECLINE: Used to decline the IP address offered by a DHCP server.


DHCP Snooping Operation
If a DHCP message is received on a trusted port, forward it as normal without inspection.
If a DHCP message is received on an untrusted port, inspect it and act as follows:
	- If it is a DHCP server message, Discard it
	- If it is a DHCP Client message, perfomr the following checks:
		-- DISCOVER/REQUEST messages: check if the frames source MAC address and the receiving interface match the entry in the DHCP snooping bidning table.
		-- RELESAE/DECLINE messages: CHeck if the packet's source IP address and the receiving interface match the entry in the DHCP snooping binding Table.

When a client successfully leases an IP adddress from a server, create a new entry in the DHCP snooping binding table.


Configuring DHCP Snooping
for configuring DHCP snooping on a switch first, you have to enable it on switch globally and then for each interface vlan id
• SW2(config)#ip dhcp snooping
• SW2(config)#ip dhcp snooping vlan 1
• SW2(config)#no ip dhcp snooping information option
note: DHCP option 82 also know as the DHCP relay agent infrormation option is one of DHCP options.
it provides additional information about which DHCP relay agent received the client's message on which interface, in which VLAN, etc.
DHCP relay agent can add option 82 to message they forward to the remote DHCP server.
by defautlt Cisco switches will drop DHCP messages with iption 82 that are recieved on an untrusted port. that is why it should be configured to not notify it on the switch.
• SW2(config)#interface g0/0
• SW2(config-if)#ip dhcp snooping trust => it will set the selected interface as trusted.

• SW2#show ip dhcp snooping binding => to check the status of DHCP MAC and IP address/interface table. (it uses the data to make check if their IP address/interface ID match the entry in the DHCP snooping table to commit operation on them.


DHCP snooping rate-limiting
it can limit the rate at which DHCP messages are allowed to enter an interface.
If the rate of DHCP messages crosses the configured limit, the interface is err-disabled. it can protect against DHCP exhaustion attacks.
it canbe manaully re-enabled or automatically re-enabled. with errdisable recovery
configuration for rate-limiting:
• SW1(config)#interface range g0/1 -3 => selecting a range of interfaces 
• SW1(config)#ip dhcp snooping limit rate (number of request for limitation)
• SW1(config)#errdisable recovery cause dhcp-rate-limit => for checking errdisable table.



### Day 51 Dynamic ARP Inspection ###
Review: ARP is used to learn the AMC address of another device with a known IP address. for example PC will use ARP to learn the MAC address of its default gateway.
Typically it is a two message exchange: request and reply
ARPs are only sent inside local network thats why it doesn't need IP header.

Review: gratuitous APR (GARP) message is an ARP reply that is sent without receiving an ARP request. it is sent in the broadcast MAC address.


DAI (Dynamic ARP Inspection)
• DIA is a security feature of switches that is used to filter ARP messages received on untrusted ports.
• DIA only filter ARP messages. Non-ARP messages aren't affected.
• All ports are untrusted by default
	- Typically, all ports connected to other network deices (switches, routers) should be configured as trusted, while interfaces connected to end hosts should remain untrusted.


ARP Poisoning (man in the middle)
the attacker can send gratutious ARP messages using another device's IP address.
other devices in the network will receive the GARP and update their ARP tables, causing them to send traffic to the attacker instead of the legitimate destination.

DAI inspects the sender MAC and sender IP fields of ARP messages received on untrusted ports and check that there is a matching entry in the DHCP snooping binding table.
	- if there is a matching entry, the ARP message is forwarded normally, other wise it will be discarded.

ARP ACLs can be manually configured to map IP addresses/MAC addresses for DAI to check. useful for hosts that don't use DHCP. DAI can do more in-depth checks also, but these are optional.

DAI supports rate-limiting to prvent attackers from overwhelming the switch.
DAI and DHCP snooping require work from the switch's CPU. even if the attacker's messages are blocked they can overload the CPU.


DAI Configuration
DAI only requires one command to enable it:
• SW1(config)# ip arp inspection vlan 1
• SW1(config)# interface range g0/0 - 1 => selecting one or range of interfaces to implement DAI
• SW1(config-if-range)# ip arp inspection trust

• SW1# sow ip arp inspection interfaces => shows status of interfaces with DAI
note:
DAI rate limiting is enabled on untrusted ports by default with a rate of 15 packets per second.
DAI burst interval allows you configure rate limitig like this:
	x packets per y seconds


DAI Rate Limiting
• SW1(config-if-range)#ip arp inspection limit rate 25 burst interval 2 => (the burst interval is optional. if you don't specify it, the default is 1 second.) this command will limit 25 message per 2 second on the selected range of interfaces.

if ARP are received faster than the specified rate, the interface will be err-disabled. it can be turned on manually or with errdisable recovery cause arp-inspection

DAI optional checks:
• SW1(config)# ip arp inspection validate dst-mac
dst-mac: validate destination AMC address
ip: validate IP addresses
src-mac: validate source MAC address
• SW1(config)# ip arp inspection validate dst-mac ip src-mac => it enables are three validation
• SW1(config)# do show running-config | include validate => to see all validations checks for DAI


ARP ACLs
• SW1# show ip dhcp snooping binding => to check the ARP table inspection of switch

1. to prepare a ACL APR table for a switch first we need to create it one.
• SW1(config)# arp access-list ARP-ACL-1 => create an access-list with the name ARP-ACL-1
• SW1(config-arp-nacl)# permit ip host 192.168.1.100 mac host 9c29.2f1e.7700

2. then we need to apply it on interfaces
• SW1(config)# ip arp inspection filter ARP-ACL-1 vlan 1

• SW1# show ip arp inspection => shows the table of all information about ARP inspection



### Day 52 LAN Architectures ###
to understand the networks you will be configuring and troubleshooting it's important to know some basics of network design.

Common Terminologies
Star: when several devices all connect to one central device we can draw them in a 'star' shape like below, so this is often called a 'star topology'.

Full Mesh: when each device is connected to each other device forming a mesh and all are connected with each other.
Partial Mesh: When some devices are connected to each other, but not all.


Two-Tier Campus LAN Design
Campus LAN referred to designs which one building office or two building connected to each other.

the two-tier LAN design consists of two heirarchical layers:
	- Access Layer
	- Distribution Layer

two-tier is also called a 'Collapsed Core' design because it omits a layer that is found in the Three Tier design: the Core Layer.

• Access Layer:
	- the layer that end hosts connect to (PCs, printers, cameras, etc)
	- typically Access Layer Switches have lots of ports for end hosts to connect to
	- QoS marking is typically done here cause mark traffic should happen as early as possible
	- Security services like port security, DAI, etc are typically perfomred here
	- switchports might be PoE-enabled for wireless APs, IP phones, etc.

• Distribution Layer:
	- aggregates connections from the Access Layer Switches
	- typically is the border between Layer 2 and Layer 3
	- connects to services such as Internet, WAN, etc.

in collapsed core designs. the Distribution Layer is sometimes called the Core-Distribution Layer.


Three-Tier Campus LAN Design
in large LAN networks with many Distribution Layer switches (for example in separate buildings), the number of connections required between Distribution Layer switches grows rapidly.

to help scale large LAN networks, you can add a Core Layer.
Cisco recommends adding a Core Layer if there are more than three Distribution Layer s in a single location.

The three-tier LAN design consists of three hierarchical layers:
Access Layer
Distribution Layer
Core Layer

Core Layer:
	- Connects Distribution Layers together in large LAN networks
	- The focus is speed ('fast transport')
	- CPU-intensive operations such as security, QoS marking/classfication, etc. should be avoided at this layer.
	- connections are layer 3, no spanning-tree.
	- Should maintain connectivity throughout the LAN even if devices fail.


Spine-leaf Architecture - cisco ACI (Application Centric Infrustructure)
Data centers are dedicated  spaces/buildings used to store computer systems such as servers and network devices.
Traditional data center designs used a three-tier architecture (Access-Distribution-Core). this worked well when mosft traffic in the data center was norht-south.
with the prcedence of virtual servers, applications are often deployed in a distributed  manner (across multiple physical servers), which increase the amount of east-west traffic in the data center.

the traditional three-tier architecture led to bottlenecks in bandwidth as well as variability in the server-to-server latency depending on the pat hthe traffic takes.

to solve this, Spine-leaf architecture (also called Clos architecture) has become prominent in data centers.

Rules about Spine-LEaf architecture;
	- Every LEaf switch is connected to every Spine switch.
	- Every Spine switch is connected to every Leaf switch.
	- Leaf switches do not connect to other Leaf switches.
	- Spine switches do not connect to other Spine switches.
	- End hosts (servers etc.) only connect to Leaf switches.
the path taken by tarffic is randomly chosen to balance the traffic load among the Spine switches.
each server is separated by the same number of 'hops' (except those connected to the same Leaf), providing consisten latency for East-West traffic.


SOHO networks
Small Office/Home Office refers to the office of a small compnay, or a small home office with few devices. SOHO networks don't have complex needs, and most of network functionality is typically provided by single device such as a router.



### Day 53 WAN (Wide Area Network) Architectures ###

WAN are used to connect geopgraphically separate LANs over a large geographic area.
although the internet itself can be considered a WAN, the term WAN is typically used to refer to an enterprise's private connections. over public/shared networks like the internet, VPNs (Virtual Private Networks) can be used to create private WAN connections


Hub-Spoke Topology
it is a topology in which the other parts of a company such as Data center or other offices are connected to the centeral location which for example the headquerter is working. the centeral location is called hub and the other offices are spoke.

• WAN over shared infrastructure and how the data is flowing between hub and spoke.


Leased
A leased line is adedicated physical link, typically connecting two sites. it uses Leased lines used serial connections (PPP or HDLC encapsulation).
Due to the higher cost, higher installation lead time, and slower speeds of leased lines, Ethernet WAN technologies are becoming more popular.


MPLS (Multi Protocol Label Switching)
service provider's MPLS networking are shared infrastructure, however the label switching in the name of MPLS allows VPNs to be created over the MPLS infrastructure through the use of labels.

Some important terms:
CE router: Customer Edge router
PE router: Provider Edge router
P  router: Provider core router

when the PE router s receive frames from the CE routers, they add a lebel to the frame which is used to make forwarding decisions within the service provider network, not the destination.


Routing Sites in Layer 3
the CE routers do not use MPLS, it is only used by the PE/P routers.
when using layer 3 MPLS VPN, the CE and PE router sppeer using OSPF, for instance to  share routing informations.
example:
office A CE will peer to PE of a provider from one site via OSFP and office B CE will peer to PE of the provider from the other edge then they will send connect with OSPF and inside the Provider it uses MPLS labeling.


Routing Sites in Layer 2
When using Layer 2 MPLS VPN, the CE and PE routers do not form peerings, the service provider network is entriely transparent to the CE routers.
in effect, it is like the two CE routers are directly connected.
	-their WAN interfaces will be in the same subnet.
if a routing protcol is used, the two CE routers will peer directly with each other and uses OSPF.


some sorts of internet Connections:
• DSL (Digital Suscriber Line)
DSL provides internet connectivity to customers over phone lines, and can share the same phone line that is already installed in most homes.
A DSL modem (modulator-demdulator) is required to convert data into a format suitable to be sent over the phone lines.
note that the modem can be a separate device that is connected to the phone line.

• Cable Internet CATV (Cable TV)
Cable internet access via the same CATV (cable television) lines used for TV service.
like DSL, a cable modem is required to convert data into a format suitable to be sent over the CATV cables.


Redundant Internet Connections
Single Homed: 1 connection to 1 ISP
Dual Homed: 2 connections 1 ISP
Multihomed = 1 connection to each 2 ISPs
Dual Multihomed = 2 connections to each of 2 ISPs

Private WAN services such as leased lines and MPLS provide security becuase each customer's traffic is separated by using dedicated physical connections.

When using the Internet as a WAN to connect sites together, there is no built-in security by default. to provide secure communication over the internet, VPNs (Virtual Private Networks) are used.

two kinds of Internet VPNs:
1. Site-to-Site VPNs using IPsec
2. Remote-access VPNs using TLS


Site-to-Site VPNs (IPsec)
A 'Site-to-Site VPNs' is a VPN between two devices and used to connect two sites together.
A VPN tunnel is created between the two  devices by encapsulating the original IP packet with a VPN header and a new IP header.
the tunlle is formed only betweeen two tunnel endpoints (ie. routers) and the data is unencrypted when it is reach to the the routers from end-host and the encrypted data will be sent from router 1 to router 2 for instance.

Limitations: of standard IPsec:
1.IPsec doesn't support broadcast and multicast traffic, only unicast. this means that routing protocols such as OSPF can't be used over the tunnels, because they rely on multicast traffic.
	- this can be used by GRE (Generic routing encapsulation) over IPsec 
2.Configuring a full mesh of tunnels between many sites is a labor-intensive task.
	- this can be solved with Cisco's DMVPN.


• GRE over IPsec
GRE creates tunnels like IPsec, but its not encrypted packet.
to get the flexibility of GRE with the security of IPsec, 'GRE over IPsec' can be used:
	the original packet will be encapsulated by a GRE header and a new IP header, and then the GRE packet will be encrypted and encapsulated within an IPsec VPN header and new IP header.


• DMVPN
Dynamic Multipoint VPN is a Cisco developed solution that allows router to dynamically create a full mesh of IPsec tunnels without having to manually configure every single tunnel.
1.confiugre IPsec tunnels to a hub site
2. the hub router give each router information about how to form an IPsec tunnel with the other routers.


• Remote-Access VPNs
remote-access VPNs are used to allow end devices (PCs, mobile phones) to access the company's internal resources securly 
Remote-access VPNs typically use TLS (Transport Layer Security)
	- TLS is also what provides security for HTTPS. TLS was formerly known as SSL 
the end devices then form secure tunnels to one of the company's routers/firewalls acting as a TLS server to connect and use resources securely.


Site-to-Site vs Remote-Access VPN
	Site-to-Site VPNs typically use IPsec
	Remote-Access VPNs typically use TLS

	Site-to-Site VPNs provide service to many devices within the sites they are connecting
	Remote-Access VPNs provide service to the one end device the VPN client sotware is installed on

	Site-to-Site VPNs are used to permanently connect two sites over the Internet
	Remote-Access VPNs provide on-demand secure connection



### Day 54 Virtualization & Cloud 1/3 ###
Before virtualizations there was a one-to-one relationship between a phyiscal server and an operating system. it was inefficient to run multiple apps on a single server, due to apps not being isolated from each other and a problem from one single app could cause all others to fail.

Virtualization allows us to break the one-to-one relationship of hardware to OS and allow to run mutliple Operating Systems. each instance is called a VM (Virtual Machine).
A hypervisor us used to manage or allocate the hardware resource. the hypervisor Type 1 is also called VMM (virtual machine monitori).
A type 1 hypervisor are also called bare-metal hypervisors and they are connected directly to hardware and are mostly used in data centers like VMware ESXi, or Microsoft Hyper-V.

Type 2 Hypervisor
Type 2 run as a program on an OS like a regular computer and VMs will be running on it. the OS running the Hypervisor is called Host OS. and OS running as VM is called Guest OS.
Type 2 hypervisors are called hosted hypervisors.

Virtualization allows:
	- Paritioning: run multiple opearing sytstems on one physical machine. and devide system resources between virtual machines.
	- Isolation: Provide fault and security isolation at the hardware level.
	- Encapsulation: save the entire state of a virtual machine to files. move and copy virtual machine as easily as moving and copying files.
	- Hardware Independence: Provision or migrate any virtual machine to any physical server.


VMs Network
VMs are connected to each other and the extenral network via a virtual switch running  on the hypervisor.
vSwtich's are like regular physical switch and its interfaces can act as access or trunk prots and use VLANs to separate the VMs at Layer 2.
interfaces on the vSwitch connect to the Physical NIC(s) of the server to communicate with the external network.


Deployments of IT infrastructures were Combinations of:
On-Premises: all equipment is owned by the company and the responsibility of them are with the companies own
Colocation: The data center do not own the devices and only take care of electricity and space and cooling.


Cloud Services:
Cloud Computing is a model for enabling ubiquitous, convenient, on-demand network access to a shared pool of configurable computing resource (e,g networks, servers, storage, applications, and services) that can be rapidly provisioned and released with minimal management effort or service provider interaction. this cloud model is composed of Five essential characteristics, three service models and four deployment models.

The Five Essential chracteristics of cloud computing:
1. On-demand self-service
2. Broad network access
3. Resource pooling
4. Rapid elasticity
5. Measured service

• On-demand self-service: a consumer can unilaterally provision computing capabilities, such as server time and network storage, as needed automatically without requiring human interaction with each service provider.
so the customer is able to use the service (or stop using) freely without direct communication to the service provider for example via a web portal.

• Broad network access: Capabilities are avaiable over the network and accessed through standard mechanism that promote use by heterogeneous thin or thick client platfroms.
the service is available through standard network connections (the internet or private WAN connections) and can be accessed through many kinds of devices.

• Resource Pooling: The provider's computing resources are pooled to serve multiple consumers using a multi-tenant model, with different phyiscal and virtual resources dynamically assigned and reassigned according to consumer demand.
so a pool of resources is provided by the service provider, and when a customer requests a service )for example creates a new VM).

• Rapid Elasticity: Customers can quickly expand the services they use in the cloud from a pool of resources that appears to be infinite. likewise, they can quickly reduce their services when not needed.

• Measured service: the cloud service provider measures the customer's usage of cloud resource, and the customer can measure their own use as well.


The Three Service Models of Cloud
in cloud computing, everything is provided on a 'service' model.
for eaxmple, rather than the end user buying a physical server, mounting it on a rack, installing the hypervisor, creating the VMs. the service provider offers all of this as a service.

The three service models of cloud computing are:
1. Software as a Service (SaaS)
2. platform as a Service (PaaS)
3. Infrastructure as a Service (IaaS)

• Software as a Service: the capability provided to the consumer is to use the provider's applcations running on a cloud infrastructure. the consumer does not manage or control the underlying cloud infrastructure include network, OS or etc and only limited to user-specific application configuration settings.
for example: Microsfot 365 applications.

• Platform as a Service: the consumer has control over the deployed applications and possibly configuration settings for the application-hosting environment.
for example: AWS Lambda and goole App engines.

• Infrastructure as a Service: the capability provided to the consumer is to provision processing, storage, networks, and other fundamental computing resources where the consumer is able to deploy and run arbitrary software, which can include operating systems and applications. user is also limited to control of selected networking components for example host firewalls.
example: Amazon EC2 and google Compute Engine


The Four Deployment Models of Cloud:
Although Public cloud is the most common deployment model, its not the only one

other models of cloud:
1. Prviate cloud
2. Community cloud
3. Public cloud
4. Hybrid cloud

• Private Cloud: the cloud infrastructure is provisioned for exclusive use by a single organization and can be owned by a third party.
example: AWS provides private cloud services for the America DoD.

• Community cloud: provisioned for exlusive use by a specific community of consumers from organizations that have shared concerns.

• Public Cloud: provisioned for open use by the general public.
popular public cloud services:
AWS (Amazon Web Services)
Microsoft Azure
GCP (Google Cloud Platform)
OCI (Oracle Cloud Infrastructur)
IBM Cloud
Alibaba Cloud

• Hybrid Cloud: the composition of two or more distinct cloud infrastructures that remain unique entities.
for example: private cloud which can offload to a public cloud when necessary.


Benefits of Cloud Computing:
	- Cost
	- Glocal Scale
	- Speed/Agility
	- Productivity
	- Reliability



### Day 54 2/3 Containers ###
Containers are sotware packages that contain an App and all dependencies (Bins/Libs in the diagram) for the contained App to run.
	Multiple apps can run in a single container, but this is not how containers are used.

Containers run on a Container Engine (ex: docker Engine). the container engine runs on a host OS (like Linux)
Containers are lightweight and include only the dependencies required to run the specific App.

A container Orchestrator is a software platfrom for automating the deployment, management, scaling of containers.
	- Kubernetes is the most popular container orchestrator
	- Docker Swarm is docker's container orchestration tool

In small numbers, manual operation is possible but for large-scale systems microservice architecture requires thousands of containers.

Microservice Architecture: an approach to sotware architecture that devides larger solution into smaller parts (microservices)
those microservices all run in containers that can be orchestrated by kubernetes or other platfrom.

VMs vs Containers:
- VMs can take minutes to boot up but Containers can boot up in Miliseconds
- VMs take up more disk space but Containers take up very little disk space
- VMs use more CPU/RAM resources but Container use much fewer 
- Containers are more portable; they are smaller and faster to boot up and can be run on nearly any container service.
- Containers are less isolated because they all run on the same OS



### Day 54 3/3 VRF (Virtual Routing & Forwarding ###
Virtual Routing & Forwarding is used to divide a single router into multiple virtual routers. similar to how VLANs are used to divide a single swtich (LAN).
It does this by allowing a router to build multiple separate routing tables.
- Interfaces (Layer 3 only) & routers are configured to be specific VRF
- Router interfaces, SVIs & routed ports on multilayer switches can be configured in a VRF.

Traffic from one VRF cannot be forwarded out of an interface to another VRF. however, VRF Leaking can be configured to allow traffic to pass between VRFs.

VRF is commonly used to facliate MPLS.
VRF-lite is a VRF without MPLS
VRF is used for traffic isolation from other traffics. Customer IP address can overlapo without issues.

note: without the use of VRF, two interfaces on the same router cannot be in the same subnet.


VRF Configuration
for configuring VRF there is two steps:
1. Creating VRFs: R(config)# ip vrf (name)
• R1(config)#ip vrf Customer1 => assign a vrf with the name Customer2
• R1(config-vrf)#ip vrf Customer2
• R1(config-vrf)#do show ip vrf  => to check VRF status

2. Assing interfaces to VRFs: R(config-if)# ip vrf forwarding (name)
• R1(config)# interface g0/0
• R1(config-if)# ip vrf forwarding Customer1
• R1(config-if)#  ip address 192.168.1.1 255.255.255.252
note: if na interface has an IP address configred, the IP address will be removed.

Note:
`show ip route` display the global routing table. so if all interfaces of router are configured in VRFs, nothing will be displayed. however mix of interfaces using VRF and non-VRF can used.

to see the ip routes of VRF use:
• R# show ip route vrf (vrf-name) => shows the interfaces that are included inside VRF with defined vrf name.

Note:
for pinging any route in VRF, you should use:
R# ping vrf (vrf-name) (ip-address) => it will ping the route and Ip address of that VRF table route. because the global route table is empty and only VRF are in use.



### Day 55 Wireless Fundamentals ###
The standard we use for wirelss LANs are defined in IEEE 802.11. the term Wi-Fi is a trademark of the Wi-Fi Alliance. Wi-Fi has become the common term that is used to refer to 802.11 wireless LANs term.

Wireless Issues:
1. All devices within range recieve all frames, like devices connected to an Ethernet Hub.
	- Privacy of data is a greate concern.
	- CSMA/CA (Carrier Sense Multiple Access with Collision Avoidance) is used to facilaite half-duplex communication.
		CSMA/CD is used for wired networks, CSMA/CA is used in wireless networks
		When using CSMA/CA, a device will wait for other devices to stop transmitting before it transmits data itself

2. wireless communications are regulated by various international and national bodies.

3. Wireless signal coverage area must be considered
	- Signal range
	- signal absorption, reflection, reflection, diffraction, scattering.
		-Absorbtion: happens when a wireless signal pases through a material and is converted into head, weakening the original signal
		- Refleciton: happens when a signal bounces off of a material, for example metal this is why Wi-Fi reception is siaully poor in elevators.
		- Refraction: happens when a wave is bent when entering a medium where the signal travels at a different speed. for example, glass and water can refract waves.
		- Diffraction happens when a wave encounters an obstacle and travels around it. this can result in blind spots behind the obstacts.
		- Scattering: happens when a material causes a signal to scatter in all directions. dust, smog, uneven surfaces, can cause scattering.

4. other devices using the same channels can cause interference. example: a wireless LAN in your neighbor's house.


Radio Frequency
to send wirelss signals, the sender applies an alternating current to an antenna. this creates electromagnetic fields which propagate out as waves.

Electromagnetic waves can be measured in multiple ways for example amplitude and frequency.
	• Amplitude is the maximum strength of the electric and magnetic fields.
	• Frequency measures the number of up/down cycles per a given unit of time.
		• the most common measurement of frequency is hertz.
			• Hz (Herz) = cycles per second
			- kHz(Kilohertz) 1,000 cycles per second.
			- MHz (Megahertz) 1,000,000 cycles per second
		• Another important term is period, the amount of time of one cylce.
			- if the frequency is 4 Hz, the period is 0.25 seconds.
		Types: Visible frequency is about 400 THz to 790 THz, Radio frequency range is froom 30 Hz to 300 GHz.
		Other ranges of frequency can be used for medication or aviation communication or other purposes. (Wiki pedia can be studied)


Radio Frequency Bands
Wi-FI uses two main bands (frequency ranges)
	• 2.4 GHz band
	• 5 GHz band
the 2.4 GHz band typically provies further reach in open space and better penetration of obstacles such as walls.
more deviecs tend to use the 2.4 GHz band so interference can be a bigger problem compared to the 5 GHz band.

note: Wi-Fi 6 (802.11ax) has expanded the spectrum range to include a band in the 6 GHz range.


Channels
Each band is divided up into multiple 'channels'. devices are configured to transmit and receive traffic on one (or more) of these channels.
for example: 2.4 GHz band is divided into several channels, each with a 22 MHz range.

In Large WLANs with multiple APs, its important that adjacent APs don't use overlapping channels in the 2.4 GHz band it is recommended to use channels 1, 6, and 11.

note:
The 5 GHz band consist of non-overlapping channels, its easier to avoid interference between adjacent APs.

802.11 Standards have different Frequencies and Max Data Rate(Theoretical)


Service Sets
802.11 defines different kinds of service sets which are groups of wireless network devices.
There are three main types:
	- Independent
	- Infrastructure
	- Mesh

All devics in a service set share the same SSID (service set Identifier)
The SSID is a human-readable name which identifies the service set. the SSID does not have to be unique.

IBSS (Independent Basic Service Set) is a wireless network in which two or more wireless devices connect directly without using an AP (Access Point). Also called Ad Hoc network.
can be used for file transfer and not that scalable.

BSS (Basic Service Set) is a kind of infrastructure Service Set in which clients connect to each other via an AP (Access Point) but not directly to each other.
BSSID (Basic Service Set ID) is used to uniquely identify the AP. and the BSSID is MAC address of AP radio.
Wireless that have associated with BSS are called 'client' or 'stations'.
The area around an AP wehre its signal is usable is called a BSA (Basic Service Area).

ESS (Extended Service Set) to create larger wireless LANs beyonf the range of a single AP, we use an ESS.
APs wit htheir own BSSs are connected by a wired network:
	- Each BSS uses the same SSID but has a unique BSSID
	- Each BSS uses a different channel to avoid interference.
Clients can pass between APs without having to reconnect, providing a seamless Wi-Fi experience when moving between APs. this is called 'roaming'
note: BSA should overlap 10-15% to prevent conectivity lost.

MBSS (Mesh Basic Service Set) can be used in situations where it's difficult to run an Ethernet connection to every AP.
Mesh APs suse two radios: one to provide a BSS wireless clients, and one to form a 'backhaul network' to bridge traffic from AP to AP.
At least one AP is connected to the wired network and it is called RAP (Root Access Point).
other APs are caled MAPs (Mesh Access Points)
A protocol is used to determine the best path through the mesh.


Distribution System
most wireless networks aren't standalone networks. they are a way for wireless clients to connect to the wired network infrustructure.
for instance ,each wireless BSS or ESS is mapped to a VLAN in the wired network.


Additional AP Operational Modes:
• Repeater Mode: can be used to extend the range of a BSS. a repeater with two radios can receive on one channel, and then retransmit on another channel.

• Workgroup birdge (WGB): operates as a wireless client of another AP, and can be used to connect wired devices to the wireless network.
for instance: PC that has no wireless capability is wired connected to the WGB which has a wireless connection to the AP.

• Outdoor bridge: used to connect networks over long distances without a physical cable connecting them.
the connection can be point-to-point or point-to-multipoint in which multiple sites connect tot one central site.



### Day 56 Wireless Architectures ###
802.11 Frame Format
802.11 frames have a different format than 803.3 Ethernet Frames.
Frame Sections:
	• Frame Control: Provides information such as the message type and subtype.
	• Duration/ID: Depending on the message type, this field can indicate:
		- the time the channel will be dedicated for transmission of the frame.
		- and identifier for the association (connection).
	• Address: Up to four address can be present in 802.11 format and the order and present depends on message type
		- Destination Address (DA): Final recipient of the frame
		- Source Address (SA): Original sender of the frame
		- Receiver Address (RA): Immediate recipient of the frame
		- Transmitter Address (TA): Immediate sender of the frame
	• Sequence Control: used to reassemble fragments and eliminate duplicate frames.
	• QoS Control: used in QoS to prioritize certain traffic.
	• HT (High Throughput) Control: Added in 802.11n to enable HIgh throughput Operations that are defined as HT(High Throughput for 802.11n and VHD (Very High Throughput) for 802.11ac.
	• FCS (Frame Check Sequence): to check for errors.


802.11 Association Process
For a station to send traffic through the AP, it must be associated with the AP
ther are three 802.11 connection states:
	- Not authenticated, not associated: probe state request and response
	- Authenticated, not associated: authentication request and response.
	- Authenticated and assiociated: association request and response
The station must be authenticated and associated with the AP to send traffic through it.

There are two ways a station can scan for a BSS:
	- Active scanning: the station sends probe requests and listen for aprobe response from an AP.
	- Passive scanning: the station listens for beacon message from an AP.


802.11 Messages Types:
• Management: used to manage the BSS
	- Beacon
	- Probe request, probe response
	- Authentication
	- Association request and response, etc
• Control: Used to control access to the medium (radion frequency). assists with delivery of management and data frames.
	- RTS (Request to Send)
	- CTS (Clear to Send)
	- ACK, etc
• Data: Used to send actual data packets.


There are three main wireless AP deployment methods:
1. Autonomous
2. Lightweight
3. Cloud-based

• Autonomous APs are self-contained systems that don't rely on a WLC.
	autonomous APs are configured individually, and can be configured by console cable (CLI), telnet/SSH (CLI), or HTTP/HTTPS web connection (GUI)
there is no central monitoring or management of APs.

note: it is the best practice to keep management traffic separate from regular data traffic by putting it in a separate subnet and VLAN.
Autonomous APs can be used in small networks but they are not viable in medium to large networks.
Each VLAN has to stretch across the entire network and it is a bad practice in large network, becuase it cause:
	- Large broadcast domains
	- Spanning tree will disable links
	- Adding/Deleting VLANs is very labor-intensive.


• Lightweight APs
the function of an AP can be split between the AP and a wireless LAN Controller (WLC).
Lightweight APs handle real-time operaitons like transmitting/receiving RF traffic, encryption/decryption of traffic, sending out beacons/probes, etc.
other functions are carried out by a WLC, for example RF management, security/QoS management, client authentication, client association/roaming management, etc.
This is called split-MAC architecture.

The WLC and the lightweight APs authenticate each other using digital certificates installed on each device (X.509 standard certifcates).

The WLC and lightweight APs use a protocol called CAPWAP (Control And Provisioning Of Wireless Access Points) to communicate. based on an older protocol called LWAPP (Lightweight Access Point Protocol).

Two Tunnels are created between each AP and the WLC:
	- Control Tunnel (UDP port 5246): this tunnel is used to configure the APs, and control/manage the operattions. all traffic in this tunnel is encrypted by default.
	- Data tunnel (UDP port 5247). All traffic from wireless client is sent through this tunnel to the WLC. it does not go directly to the wired network.
Traffic in this tunnel is not encrypted by default, but you can configure it to be encrypted with DTLS (Data gram Transport Layer Security which uses UDP)

note:
Because all traffic from wirelss clients is tunneled to the WLC wit hCAPWAP, APs conenct to switch access ports, nut trunk ports.

benefits of Lightweight APs
	- Scalability: can simple scale up network APs.
	- Dynamic channel assignments: WLC can automatically select channel which channel each AP should use
	- Transmit power optimization: set appropriate transmit power for each AP
	- Self-healing wireless coverage WLC can increase the transmit power of nearby APs to avoid converage holes.
	- Seamless roaming
	- Client load balancing
	- Secuirty/QoS mangement


Lightweight APs Operations various:
• Local: this is the default mode where the AP offers a BSS(s) for client to associate.

• FlexConnect: allows the AP to locally switch traffic between the wired and wireless networks if tunnels to the WLC go down.

• Sniffer: THe AP does not offer a BSS for clients. it is dedicated to capturing frames and sending them to a device running sniffer sotware like wireshark.

• Monitor: THe AP does not offer a BSS for client, it is dedicated to  receive frames to detect rogue devices. so it can found rogue devices and de-authenticate them from AP.

• Rogue Detector: The AP does not use its radio. it listens to traffic on the wired network only, but it receives a list of suspected rogue client and AP MAC addresses from the WLC. by listening to ARP messages on the wired netowkr and correlating it with WLC, it can detect rogue devices.

• SE-Connect (Spectrum Expert Connect): The AP does not offer a BSS for clients. It is dedicated to RF spectrum analysis on all channels. it can send information to software such as Cisco Spectrum Expert.

• Bridge/Mesh: the lightweight AP can be a didcarted bridge between sites.

• Flex plus Bridge: Adds FlexConnect functionality to the Bridge/Mesh mode.


Cloud-Base APs
Cloud-base AP architecture is in between autonomous AP and split-MAC architecture.
Autonomous APs are centrally managed by a Cloud Application like Cisco Meraki.
however, data traffic is not sent to the cloud, it is sent directly to the wired network like when using autonomous APs. Only management/control traffic is sent to the cloud.


WLC Deployments:
there are four main WLC deployment models for split-MAC architecture:
1. Unified: The WLC is a hardware appliance in acentral location of the network
2. Cloud-Based: the WLC is a vm running on a server, usually in a private cloud.
3. Embedded: The WLC is integrated within a switch
4. Mobility Express: The WLC is integrated within an AP.



