# Cinder Block Storage Service Configuration Overrides
# These settings will be merged with Kolla-Ansible defaults
# Reference: https://docs.openstack.org/cinder/latest/configuration/

[DEFAULT]
# Logging
debug = false
verbose = false
log_dir = /var/log/cinder

# Backend Configuration
enabled_backends = ceph

# API Configuration
api_paste_config = /etc/cinder/api-paste.ini
auth_strategy = keystone

# Volume Configuration
volume_clear = zero
volume_clear_size = 0
volume_driver = cinder.volume.drivers.rbd.RBDDriver

# RBD Backend Configuration
[ceph]
volume_driver = cinder.volume.drivers.rbd.RBDDriver
volume_backend_name = ceph
rbd_pool = volumes
rbd_ceph_conf = /etc/ceph/ceph.conf
rbd_user = cinder
rbd_secret_uuid = {{ cinder_rbd_secret_uuid }}
rbd_flatten_volume_from_snapshot = false
rbd_max_clone_depth = 5
rados_connect_timeout = -1
rbd_store_chunk_size = 4

# Glance Integration
glance_api_servers = http://{{ kolla_internal_vip_address }}:9292

# Backup Configuration (optional)
backup_driver = cinder.backup.drivers.ceph.CephBackupDriver
backup_ceph_conf = /etc/ceph/ceph.conf
backup_ceph_user = cinder-backup
backup_ceph_pool = backups
backup_ceph_stripe_count = 0

[oslo_concurrency]
lock_path = /var/lib/cinder/tmp
